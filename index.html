<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Savoir Énigme boutique</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --burgundy: #6d1a36;
            --light-burgundy: #6d1a36;
            --beige: #e6d2c4;
            --dark-beige: #d4b9a4;
            --black: #1a1a1a;
            --white: #ffffff;
            --gray: #f5f5f5;
            --dark-gray: #4a4a4a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            color: var(--black);
            background-color: var(--white);
            line-height: 1.6;
            overflow-x: hidden;
        }

        h1, h2, h3, h4, h5 {
            font-family: 'Playfair Display', serif;
            font-weight: 600;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        ul {
            list-style: none;
        }

        .container {
            width: 100%;
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 40px;
        }

        .btn {
            display: inline-block;
            padding: 12px 28px;
            background-color: var(--burgundy);
            color: var(--white);
            border: none;
            border-radius: 2px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn:hover {
            background-color: var(--light-burgundy);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(109, 26, 54, 0.2);
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--burgundy);
            color: var(--burgundy);
        }

        .btn-outline:hover {
            background-color: var(--burgundy);
            color: var(--white);
        }

        .page-section {
            display: none;
            min-height: 70vh;
            padding: 80px 0;
            opacity: 0;
            transform: translateY(50px);
            will-change: opacity, transform;
            transition: opacity 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .page-section.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        #product-detail.active {
            animation: fadeInSlideUp 1s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }

        @keyframes fadeInSlideUp {
            from {
                opacity: 0;
                transform: translateY(100px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInSlideDown {
            from {
                opacity: 0;
                transform: translateY(-100px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .section-header h2 {
            font-size: 42px;
            position: relative;
            display: inline-block;
            margin-bottom: 15px;
        }

        .section-header h2::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 2px;
            background-color: var(--burgundy);
        }

        .section-header p {
            max-width: 700px;
            margin: 0 auto;
            color: var(--dark-gray);
            font-size: 18px;
        }

        /* Header Styles */
        header {
            background-color: var(--white);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .top-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            position: relative;
        }

        .logo {
            font-family: 'Playfair Display', serif;
            font-size: 32px;
            font-weight: 700;
            color: var(--burgundy);
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
        }

        /* Бургер-меню с ровными линиями */
        .burger-menu {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            width: 30px;
            height: 24px; /* Увеличена высота для большего расстояния между линиями */
            cursor: pointer;
            z-index: 1001;
        }

        .burger-line {
            width: 30px; /* Фиксированная ширина */
            height: 3px; /* Фиксированная высота */
            background-color: var(--burgundy);
            transition: all 0.3s ease;
            border-radius: 2px; /* Скругление добавлено */
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url('https://images.unsplash.com/photo-1593030103066-0093718efeb9?ixlib=rb-4.0.3&auto=format&fit=crop&w=1950&q=80');
            background-size: cover;
            background-position: center;
            height: 85vh;
            display: flex;
            align-items: center;
            color: var(--white);
            position: relative;
            margin-top: -70px; /* Убираем белую полоску над заголовком */
        }

        .hero-content {
            max-width: 700px;
            padding: 0 60px;
        }

        .hero h1 {
            font-size: 64px;
            line-height: 1.2;
            margin-bottom: 25px;
        }

        .hero p {
            font-size: 20px;
            margin-bottom: 40px;
            max-width: 600px;
        }

        /* Categories Section */
        .categories {
            padding: 100px 0;
            background-color: var(--gray);
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 40px;
        }

        .category-card {
            position: relative;
            height: 350px;
            overflow: hidden;
            border-radius: 4px;
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .category-card:hover {
            transform: translateY(-10px);
        }

        .category-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .category-card:hover img {
            transform: scale(1.05);
        }

        .category-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));
            padding: 25px;
            color: var(--white);
            text-align: center;
        }

        .category-overlay h3 {
            font-size: 26px;
        }

        /* Products Section */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 40px;
        }

        .product-card {
            position: relative;
            background-color: var(--white);
            border-radius: 4px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .product-image {
            height: 350px;
            position: relative;
            overflow: hidden;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .product-card:hover .product-image img {
            transform: scale(1.05);
        }

        .product-actions {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            opacity: 1; /* Изменено: всегда видно */
            transition: opacity 0.3s ease;
        }

        .action-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background-color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--black);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            font-size: 18px;
        }

        .action-btn.favorite {
            color: var(--burgundy) !important;
        }
        
        .action-btn:hover {
            background-color: var(--burgundy);
            color: var(--white);
            transform: scale(1.1);
        }

        .product-info {
            padding: 25px;
            user-select: text;
        }

        .product-title {
            font-size: 20px;
            margin-bottom: 10px;
            cursor: pointer;
        }

        .product-title:hover {
            color: var(--burgundy);
        }

        /* Сезон над материалом */
        .product-seasonality {
            color: var(--burgundy);
            font-size: 14px;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .product-material {
            color: var(--dark-gray);
            font-size: 14px;
            margin-bottom: 10px;
        }

        .product-price {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .price {
            font-weight: 600;
            font-size: 20px;
        }

        .add-to-cart {
            background: none;
            border: none;
            color: var(--burgundy);
            font-size: 24px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .add-to-cart:hover {
            transform: scale(1.1);
        }

        /* About Section */
        .about-section {
            background-color: var(--beige);
        }

        .about-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: flex-start;
        }

        .about-image {
            height: 550px;
            border-radius: 4px;
            overflow: hidden;
        }

        .about-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .about-content h2 {
            font-size: 42px;
            margin-bottom: 25px;
            position: relative;
        }

        .about-content h2::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 0;
            width: 80px;
            height: 2px;
            background-color: var(--burgundy);
        }

        .about-content p {
            margin-bottom: 25px;
            line-height: 1.8;
            font-size: 18px;
        }

        /* Newsletter */
        .newsletter {
            background-color: var(--burgundy);
            color: var(--white);
            text-align: center;
        }

        .newsletter h2 {
            font-size: 36px;
            margin-bottom: 20px;
        }

        .newsletter p {
            max-width: 700px;
            margin: 0 auto 40px;
            font-size: 18px;
        }

        .newsletter-form {
            max-width: 600px;
            margin: 0 auto;
            display: flex;
        }

        .newsletter-form input {
            flex-grow: 1;
            padding: 17px 25px;
            border: none;
            border-radius: 2px 0 0 2px;
            font-size: 17px;
        }

        .newsletter-form button {
            padding: 0 40px;
            background-color: var(--black);
            color: var(--white);
            border: none;
            border-radius: 0 2px 2px 0;
            cursor: pointer;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 16px;
            transition: background-color 0.3s;
        }

        .newsletter-form button:hover {
            background-color: var(--dark-gray);
        }

        /* Cart & Wishlist */
        .cart-wishlist-container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 40px;
        }

        .cart-items, .wishlist-items {
            background: var(--white);
            border-radius: 4px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            padding: 30px;
        }

        .cart-item, .wishlist-item {
            display: flex;
            padding: 20px 0;
            border-bottom: 1px solid var(--gray);
            transition: all 0.3s ease;
        }

        .cart-item:last-child, .wishlist-item:last-child {
            border-bottom: none;
        }

        .cart-item-image, .wishlist-item-image {
            width: 120px;
            height: 150px;
            margin-right: 20px;
            border-radius: 4px;
            overflow: hidden;
            flex-shrink: 0;
            cursor: pointer;
        }

        .cart-item-image img, .wishlist-item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .cart-item-details, .wishlist-item-details {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .cart-item-title, .wishlist-item-title {
            font-size: 18px;
            margin-bottom: 10px;
            cursor: pointer;
        }

        .cart-item-title:hover, .wishlist-item-title:hover {
            color: var(--burgundy);
        }

        .cart-item-price, .wishlist-item-price {
            font-weight: 600;
            color: var(--burgundy);
            margin-bottom: 15px;
        }

        .cart-item-actions, .wishlist-item-actions {
            display: flex;
            gap: 15px;
            margin-top: auto;
        }

        /* Улучшаем стили для кнопок в корзине */
        .quantity-control {
            display: flex;
            align-items: center;
            border: 1px solid var(--beige);
            border-radius: 4px;
            overflow: hidden;
        }

        .quantity-btn {
            width: 36px;
            height: 36px;
            background: var(--gray);
            border: none;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .quantity-btn:hover {
            background-color: var(--dark-beige);
        }

        .quantity-btn.minus {
            border-right: 1px solid var(--beige);
        }

        .quantity-btn.plus {
            border-left: 1px solid var(--beige);
        }

        .quantity-input {
            width: 50px;
            height: 36px;
            text-align: center;
            border: none;
            font-size: 16px;
            font-weight: 500;
        }

        .remove-btn {
            background: none;
            border: none;
            color: var(--dark-gray);
            cursor: pointer;
            transition: color 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .remove-btn:hover {
            color: var(--burgundy);
        }

        .summary {
            background: var(--white);
            border-radius: 4px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            padding: 30px;
            height: fit-content;
        }

        .summary-title {
            font-size: 24px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--beige);
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .summary-total {
            font-size: 20px;
            font-weight: 600;
            margin: 25px 0;
            padding-top: 15px;
            border-top: 1px solid var(--beige);
        }

        .empty-container {
            text-align: center;
            padding: 50px 0;
        }

        .empty-container i {
            font-size: 60px;
            color: var(--beige);
            margin-bottom: 20px;
            display: block;
        }

        .empty-container h3 {
            font-size: 24px;
            margin-bottom: 15px;
            display: block;
        }

        .empty-container p {
            display: block;
        }

        /* Стили для мета-информации в корзине */
        .cart-item-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .cart-item-size {
            color: var(--dark-gray);
            font-weight: 500;
        }

        .cart-item-price {
            font-weight: 600;
            color: var(--burgundy);
        }

        /* Footer */
        footer {
            background-color: var(--black);
            color: var(--white);
            padding: 100px 0 40px;
        }

        .footer-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 50px;
            margin-bottom: 60px;
        }

        .footer-col h3 {
            font-size: 24px;
            margin-bottom: 30px;
            position: relative;
        }

        .footer-col h3::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 0;
            width: 50px;
            height: 2px;
            background-color: var(--burgundy);
        }

        .footer-col ul li {
            margin-bottom: 20px;
        }

        .footer-col ul li a {
            color: var(--beige);
            transition: color 0.3s;
        }

        .footer-col ul li a:hover {
            color: var(--white);
        }

        .social-links {
            display: flex;
            gap: 20px;
            margin-top: 25px;
        }

        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--white);
            transition: all 0.3s;
            font-size: 18px;
        }

        .social-links a:hover {
            background-color: var(--burgundy);
            transform: translateY(-3px);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 40px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 16px;
            color: var(--beige);
        }

        /* Мобильное меню */
        .mobile-menu-container {
            position: fixed;
            top: 0;
            left: -100%;
            width: 100%;
            max-width: 320px;
            height: 100vh;
            background-color: var(--white);
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            transition: left 0.4s ease;
            padding: 80px 30px 30px;
            overflow-y: auto;
        }

        .mobile-menu-container.active {
            left: 0;
        }

        .mobile-nav-menu {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 40px;
        }

        .mobile-nav-menu a {
            font-size: 18px;
            font-weight: 500;
            padding: 12px 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            display: block;
        }

        .mobile-menu-actions {
            display: flex;
            justify-content: space-around;
            border-top: 1px solid rgba(0, 0, 0, 0.05);
            padding-top: 20px;
            padding-bottom: 50px; /* Добавлен padding снизу, чтобы Избранное и Корзина были ниже */
        }

        .mobile-icon-link {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 14px;
            position: relative;
        }

        .mobile-icon-link i {
            font-size: 22px;
            margin-bottom: 5px;
        }

        .mobile-icon-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--burgundy);
            color: var(--white);
            border-radius: 50%;
            min-width: 20px; /* Изменено: min-width для адаптации под цифры >9 */
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
            line-height: 20px; /* Добавлено для идеального центрирования цифр */
            padding: 0 4px; /* Добавлено для лучшей центровки */
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: none;
        }

        .overlay.active {
            display: block;
        }

        .close-menu {
            position: absolute;
            top: 25px;
            right: 25px;
            font-size: 24px;
            cursor: pointer;
            color: var(--burgundy);
        }

        /* Модальное окно оформления заказа */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal {
            background-color: var(--white);
            border-radius: 8px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.4s ease;
        }
        
        .modal-overlay.active .modal {
            transform: translateY(0);
            opacity: 1;
        }
        
        .modal-header {
            background-color: var(--burgundy);
            color: var(--white);
            padding: 25px;
            border-radius: 8px 8px 0 0;
            position: relative;
        }
        
        .modal-header h2 {
            font-size: 28px;
            margin: 0;
        }
        
        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: var(--white);
            font-size: 28px;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .close-modal:hover {
            transform: rotate(90deg);
        }
        
        .modal-body {
            padding: 30px;
            max-height: 70vh;
            overflow-y: auto;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark-gray);
        }
        
        .form-control {
            width: 100%;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .form-control:focus {
            border-color: var(--burgundy);
            outline: none;
            box-shadow: 0 0 0 2px rgba(109, 26, 54, 0.1);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .modal-footer {
            padding: 20px 30px;
            background-color: var(--gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 0 0 8px 8px;
        }
        
        .modal-total {
            font-size: 20px;
            font-weight: 600;
        }
        
        .modal-total span {
            color: var(--burgundy);
        }
        
        /* Анимация для удаления */
        @keyframes flyOut {
            0% { 
                opacity: 1;
                transform: translateX(0) rotate(0);
            }
            100% { 
                opacity: 0;
                transform: translateX(100px) rotate(30deg);
            }
        }
        
        .fly-out {
            animation: flyOut 0.5s forwards;
        }
        
        /* Анимация для добавления */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 0.5s ease;
        }

        /* Страница товара */
        .product-detail-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: flex-start;
        }

        .product-detail-images {
            display: grid;
            grid-template-columns: 100px 1fr;
            gap: 20px;
            position: sticky;
            top: 120px;
            align-self: flex-start;
        }

        .product-thumbnails {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .product-thumbnail {
            width: 100px;
            height: 120px;
            border-radius: 4px;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .product-thumbnail.active {
            border-color: var(--burgundy);
        }

        .product-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .product-main-image {
            height: 600px;
            border-radius: 4px;
            overflow: hidden;
        }

        .product-main-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .product-details {
            padding: 20px;
        }

        .product-detail-title {
            font-size: 36px;
            margin-bottom: 20px;
        }

        .product-detail-price {
            font-size: 28px;
            color: var(--burgundy);
            margin-bottom: 25px;
            font-weight: 600;
        }
        
        /* Добавленный стиль для материала */
        .product-detail-material {
            color: var(--dark-gray);
            font-size: 16px;
            margin-bottom: 20px;
        }

        /* Добавленный стиль для силуэта */
        .product-detail-silhouette {
            color: var(--dark-gray);
            font-size: 16px;
            margin-bottom: 20px;
        }

        /* Добавленный стиль для цвета */
        .product-detail-color {
            color: var(--dark-gray);
            font-size: 16px;
            margin-bottom: 20px;
        }

        /* Стили для сворачиваемых секций */
        .detail-section {
            margin-bottom: 25px;
            border-bottom: 1px solid var(--beige);
            padding-bottom: 15px;
        }

        .detail-section .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            cursor: pointer;
        }

        .detail-section .section-header span {
            font-weight: 500;
        }

        .toggle-btn {
            background: none;
            border: none;
            color: var(--burgundy);
            font-size: 18px;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.3s;
        }

        .toggle-btn:hover {
            background-color: rgba(109, 26, 54, 0.1);
        }

        .section-content {
            display: block;
            max-height: 0;
            opacity: 0;
            transition: max-height 0.3s ease, opacity 0.3s ease;
            overflow: hidden;
            padding: 0 0;
        }

        .section-content.active {
            max-height: 1000px;
            opacity: 1;
            padding: 10px 0;
        }

        #product-detail-benefits {
            padding-left: 20px;
        }

        #product-detail-benefits li {
            margin-bottom: 8px;
        }

        .product-detail-description {
            margin-bottom: 30px;
            line-height: 1.8;
            color: var(--dark-gray);
        }

        .product-options {
            margin-bottom: 30px;
        }

        .option-group {
            margin-bottom: 20px;
        }

        .option-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .option-select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background-color: var(--white);
            font-size: 16px;
        }

        /* Изменено: размер и количество на одном уровне */
        .product-options-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .product-options-row .option-group {
            flex: 1;
        }
        
        /* Изменено: кнопки на отдельной строке */
        .product-action-buttons {
            display: flex;
            gap: 15px;
        }
        
        /* Стили для выбора количества */
        .quantity-selector {
            display: flex;
            align-items: center;
            border: 1px solid #ddd;
            border-radius: 4px;
            width: 120px;
        }
        
        .quantity-selector button {
            width: 40px;
            height: 40px;
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s;
        }
        
        .quantity-selector button:hover {
            background-color: var(--gray);
        }
        
        .quantity-display {
            width: 40px;
            height: 40px;
            text-align: center;
            border: none;
            border-left: 1px solid #ddd;
            border-right: 1px solid #ddd;
            font-size: 18px;
            font-weight: 500;
        }

        .back-to-products {
            display: inline-block;
            margin-top: 30px;
            color: var(--burgundy);
            font-weight: 500;
            transition: color 0.3s, transform 0.3s ease;
        }

        .back-to-products:hover {
            color: var(--light-burgundy);
            transform: translateX(-10px);
        }

        .back-to-products:active {
            transform: translateX(-5px) scale(0.95);
            transition: transform 0.1s ease;
        }

        /* Стили для модального окна быстрого добавления */
        .quick-add-modal .modal {
            max-width: 450px;
        }
        
        .quick-add-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .quick-add-image {
            width: 120px;
            height: 150px;
            border-radius: 4px;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .quick-add-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .quick-add-title {
            font-size: 20px;
            margin-bottom: 10px;
        }
        
        .quick-add-price {
            font-size: 18px;
            color: var(--burgundy);
            font-weight: 600;
        }
        
        /* Уведомления */
        .notification {
            position: fixed;
            top: 30px;
            right: 30px;
            background-color: var(--burgundy);
            color: var(--white);
            padding: 15px 25px;
            border-radius: 4px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 3000;
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .notification.active {
            opacity: 1;
            transform: translateX(0);
        }
        
        .notification i {
            font-size: 20px;
        }

        /* Новые стили для поиска в мобильном меню */
        .mobile-search {
            padding: 0 15px 20px;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .mobile-search input {
            width: 100%;
            padding: 12px 20px;
            border: 1px solid var(--beige);
            border-radius: 2px;
            font-size: 16px;
        }

        /* Страница результатов поиска */
        #search-results .section-header {
            text-align: left;
        }
        
        #search-results .section-header h2 {
            display: block;
            text-align: left;
        }
        
        #search-results .section-header h2::after {
            left: 0;
            transform: none;
        }
        
        /* Недоступные размеры */
        .size-disabled {
            color: #ccc !important;
            cursor: not-allowed;
        }

        /* Навигация по категориям */
        .category-nav {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 40px;
        }

        .category-link {
            padding: 10px 20px;
            background-color: var(--white);
            border: 1px solid var(--beige);
            border-radius: 30px;
            color: var(--dark-gray);
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .category-link:hover {
            background-color: var(--burgundy);
            color: var(--white);
            border-color: var(--burgundy);
        }

        .category-link.highlight {
            background-color: rgba(109, 26, 54, 0.1);
            border-color: var(--burgundy);
            color: var(--burgundy);
        }

        .category-link.active {
            background-color: var(--burgundy);
            color: var(--white);
            border-color: var(--burgundy);
        }
        
        /* Новые стили для категорий */
        .category-section {
            display: none;
        }
        
        .category-section.active {
            display: block;
        }

        /* Минималистичные фильтры под каталогами */
        .filters-container {
            background-color: transparent;
            border-radius: 0;
            padding: 15px 0;
            margin-bottom: 30px;
            box-shadow: none;
            display: none;
        }

        .filters-header {
            padding: 0;
            margin-bottom: 15px;
        }

        .filters-header h2 {
            font-size: 20px;
            font-weight: 600;
        }

        .reset-filters {
            background: none;
            border: none;
            color: var(--beige);
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: color 0.3s;
        }

        .reset-filters:hover {
            color: var(--burgundy);
        }

        .filter-group {
            margin-bottom: 15px;
        }

        .filter-group h3 {
            font-size: 16px;
            margin-bottom: 8px;
            color: var(--dark-gray);
        }

        .price-slider {
            height: 4px;
            background: #ddd;
        }

        .price-slider::-webkit-slider-thumb {
            width: 16px;
            height: 16px;
        }

        .price-values {
            font-size: 14px;
            color: var(--dark-gray);
        }

        .season-filter, .stock-filter {
            gap: 6px;
        }

        .season-filter label, .stock-filter label {
            font-size: 14px;
        }

        .color-filter select {
            padding: 8px 12px;
            font-size: 14px;
        }

        .filter-tag {
            font-size: 12px;
            padding: 4px 8px;
        }
        
        /* Новые стили для двух полей ввода цены */
        .price-filter {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .price-inputs {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-grow: 1;
        }
        
        .price-input-group {
            position: relative;
            flex: 1;
        }
        
        .price-input-group span {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--dark-gray);
        }

        .price-input {
            width: 100%;
            padding: 12px 40px 12px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            height: 40px;
        }

        .apply-price {
            margin-top: 0;
            padding: 0;
            background-color: var(--burgundy);
            color: var(--white);
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            flex-shrink: 0;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .apply-price:hover {
            background-color: var(--light-burgundy);
        }

        /* Убрать стрелочки из input type=number */
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type=number] {
            -moz-appearance: textfield;
        }

        /* Новые стили для фильтров */
        .filter-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            cursor: pointer;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }

        .filter-header h3 {
            margin: 0;
            font-size: 16px;
            font-weight: 500;
        }

        .filter-header i {
            transition: transform 0.3s ease;
        }

        .filter-content {
            display: none;
            padding: 15px 0;
        }

        .filter-group.active .filter-content {
            display: block;
        }

        .filter-group.active .filter-header i {
            transform: rotate(180deg);
        }

        .filter-tag {
            display: inline-block;
            background-color: rgba(109, 26, 54, 0.1);
            padding: 5px 10px;
            border-radius: 20px;
            margin-right: 8px;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .filter-tag button {
            background: none;
            border: none;
            margin-left: 5px;
            cursor: pointer;
            color: var(--burgundy);
        }

        /* Стили для цветов */
        .color-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .color-option.active {
            border-color: white;
            box-shadow: 0 0 0 2px var(--burgundy);
        }

        /* Анимация fade-in */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .hero h1 {
                font-size: 52px;
            }

            .cart-wishlist-container {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 1024px) {
            .container {
                padding: 0 30px;
            }

            .hero h1 {
                font-size: 48px;
            }

            .hero-content {
                padding: 0 40px;
            }

            .product-detail-container {
                grid-template-columns: 1fr;
            }

            .product-detail-images {
                position: static;
                grid-template-columns: 1fr;
            }

            .product-thumbnails {
                flex-direction: row;
                overflow-x: auto;
            }

            .product-main-image {
                height: 500px;
            }

            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 30px;
            }

            .category-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 30px;
            }

            .category-card {
                height: 300px;
            }

            .about-container {
                grid-template-columns: 1fr;
            }

            .about-image {
                height: 400px;
            }

            /* Адаптация фильтра цены для средних устройств */
            .price-filter {
                flex-direction: row;
                align-items: center;
            }

            .price-inputs {
                flex-direction: row;
                margin-bottom: 0;
                flex-grow: 1;
            }

            .apply-price {
                width: 40px;
                height: 40px;
                margin-top: 0;
            }

            .mobile-icon-badge {
                min-width: 18px;
                font-size: 11px;
                padding: 0 3px;
            }
        }

        @media (max-width: 992px) {
            .hero h1 {
                font-size: 42px;
            }

            .about-container {
                grid-template-columns: 1fr;
            }

            .about-image {
                height: 450px;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .product-detail-container {
                grid-template-columns: 1fr;
            }
            
            .product-detail-images {
                position: static;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 20px;
            }

            .hero {
                height: 70vh;
            }
            
            .hero-content {
                padding: 0 20px;
                text-align: center;
            }

            .hero h1 {
                font-size: 36px;
            }

            .newsletter-form {
                flex-direction: column;
                gap: 15px;
            }

            .newsletter-form input,
            .newsletter-form button {
                width: 100%;
                border-radius: 2px;
                padding: 15px;
            }
            
            .product-detail-images {
                grid-template-columns: 1fr;
            }
            
            .product-thumbnails {
                flex-direction: row;
                order: 2;
                overflow-x: auto;
                padding-bottom: 10px;
            }
            
            .product-main-image {
                height: 400px;
            }
            
            .category-nav {
                gap: 10px;
            }
            
            .category-link {
                padding: 8px 15px;
                font-size: 14px;
            }
            
            /* Изменено: адаптация для новых элементов */
            .product-options-row {
                flex-direction: column;
                gap: 15px;
            }
            
            .product-action-buttons {
                flex-direction: column;
            }

            .product-detail-images {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .product-thumbnails {
                flex-direction: row;
                gap: 10px;
                overflow-x: auto;
            }

            .product-thumbnail {
                width: 80px;
                height: 100px;
            }

            .product-main-image {
                height: 400px;
            }

            .top-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .logo {
                position: absolute;
                left: 50%;
                transform: translateX(-50%);
                order: 2;
                white-space: nowrap;
            }

            .burger-menu {
                order: 1;
            }

            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                gap: 20px;
            }

            .category-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 20px;
            }

            .category-card {
                height: 250px;
            }

            .about-image {
                height: 350px;
            }

            /* Адаптация фильтра цены для маленьких устройств */
            .price-filter {
                flex-direction: row;
                align-items: center;
            }

            .price-inputs {
                flex-direction: row;
                gap: 10px;
                flex-grow: 1;
            }

            .price-input-group {
                flex: 1;
            }

            .price-input {
                height: 40px;
                font-size: 14px;
            }

            .mobile-icon-badge {
                min-width: 16px;
                font-size: 10px;
                padding: 0 2px;
            }
        }

        @media (max-width: 576px) {
            .cart-item, .wishlist-item {
                flex-direction: column;
            }
            
            .cart-item-image, .wishlist-item-image {
                width: 100%;
                height: 200px;
                margin-right: 0;
                margin-bottom: 15px;
            }
            
            .mobile-menu-container {
                width: 100%;
                max-width: none;
            }
            
            .modal-footer {
                flex-direction: column;
                gap: 20px;
            }
            
            .product-action-buttons {
                flex-direction: column;
            }

            .quick-add-header {
                flex-direction: column;
                text-align: center;
            }
            
            .quick-add-image {
                margin: 0 auto;
            }
            
            .products-grid {
                grid-template-columns: 1fr;
            }

            /* Адаптация фильтра цены для очень маленьких устройств */
            .price-filter {
                flex-direction: row;
                align-items: center;
            }

            .price-inputs {
                flex-direction: row;
                gap: 5px;
                flex-grow: 1;
            }

            .price-input-group {
                flex: 1;
            }

            .price-input {
                font-size: 12px;
                padding: 12px 30px 12px 10px;
            }

            .price-input-group span {
                right: 5px;
                font-size: 12px;
            }

            .apply-price {
                width: 35px;
                height: 40px;
                font-size: 12px;
            }

            .mobile-icon-badge {
                min-width: 14px;
                height: 18px;
                line-height: 18px;
                font-size: 9px;
                padding: 0 2px;
            }
        }

        /* Стили для кнопки фильтра */
        .filter-toggle {
            display: block;
            margin-bottom: 20px;
            padding: 10px 20px;
            background-color: var(--burgundy);
            color: var(--white);
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            text-align: center;
        }

        .filter-toggle:hover {
            background-color: var(--light-burgundy);
        }

        /* Улучшение анимации открытия товара */
        #product-detail {
            transition: opacity 1s ease-in-out, transform 1s ease-in-out;
        }

        #product-detail.active {
            opacity: 1;
            transform: translateY(0);
            animation: fadeInSlideUp 1s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }

        /* Анимация для кнопки назад */
        .back-to-products {
            transition: color 0.3s ease, transform 0.3s ease;
        }

        .back-to-products:hover {
            color: var(--light-burgundy);
            transform: translateX(-10px); /* Усиленная анимация */
        }

        /* Центрирование сообщений об ошибке поиска */
        #search-results .empty-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        #search-results .empty-container h3,
        #search-results .empty-container p {
            max-width: 80%;
            margin-left: auto;
            margin-right: auto;
        }

        /* Стили для избранного на странице товара */
        #add-to-wishlist-detail.favorite i {
            color: var(--burgundy);
        }
    </style>
</head>
<body>
    <!-- Уведомления -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notification-text"></span>
    </div>
    
    <!-- Header -->
    <header>
        <div class="container">
            <div class="top-header">
                <!-- Бургер-меню для всех устройств -->
                <div class="burger-menu" id="burger-menu">
                    <div class="burger-line"></div>
                    <div class="burger-line"></div>
                    <div class="burger-line"></div>
                </div>
                
                <a href="#" class="logo">Savoir Énigme</a>
            </div>
        </div>
    </header>
    
    <!-- Мобильное меню с поиском -->
    <div class="mobile-menu-container" id="mobile-menu">
        <span class="close-menu" id="close-menu">
            <i class="fas fa-times"></i>
        </span>
        
        <!-- Поиск в меню -->
        <div class="mobile-search">
            <input type="text" id="mobile-search-input" placeholder="Поиск товаров...">
        </div>
        
        <ul class="mobile-nav-menu">
            <li><a href="#" class="nav-link" data-page="home">Главная</a></li>
            <li><a href="#" class="nav-link" data-page="all">Весь ассортимент</a></li>
            <li><a href="#" class="nav-link" data-page="suits">Костюмы</a></li>
            <li><a href="#" class="nav-link" data-page="jackets">Пиджаки</a></li>
            <li><a href="#" class="nav-link" data-page="pants">Брюки</a></li>
            <li><a href="#" class="nav-link" data-page="shirts">Рубашки</a></li>
            <li><a href="#" class="nav-link" data-page="accessories">Аксессуары</a></li>
            <li><a href="#" class="nav-link" data-page="new-collection">Новые поступления</a></li>
        </ul>
        
        <div class="mobile-menu-actions">
            <a href="#" class="mobile-icon-link nav-link" data-page="wishlist">
                <i class="far fa-heart"></i>
                <span>Избранное</span>
                <span id="mobile-wishlist-count" class="mobile-icon-badge">0</span>
            </a>
            
            <a href="#" class="mobile-icon-link nav-link" data-page="cart">
                <i class="fas fa-shopping-bag"></i>
                <span>Корзина</span>
                <span id="mobile-cart-count" class="mobile-icon-badge">0</span>
            </a>
        </div>
    </div>
    
    <!-- Оверлей для меню -->
    <div class="overlay" id="menu-overlay"></div>

    <!-- Home Page -->
    <section id="home" class="page-section active">
        <!-- Hero Section -->
        <section class="hero">
            <div class="container">
                <div class="hero-content">
                    <h1>Элегантность вне времени</h1>
                    <p>Мы — Ваш проводник в мир мужской классической одежды.</p>
                    <a href="#" class="btn nav-link" data-page="all">Открыть коллекцию</a>
                </div>
            </div>
        </section>

        <!-- Categories Section -->
        <section class="categories">
            <div class="container">
                <div class="section-header">
                    <h2>Коллекции</h2>
                    <p>Основные категории нашего ассортимента</p>
                </div>
                
                <div class="category-grid">
                    <a href="#" class="category-card nav-link" data-page="jackets">
                        <img class="category-card nav-link" data-wow-delay="0.5s" src="jacket.jpg" alt="Пиджаки" />
                        <div class="category-overlay">
                            <h3>Пиджаки</h3>
                        </div>
                    </a>
                    
                    <a href="#" class="category-card nav-link" data-page="pants">
                        <img src="https://images.unsplash.com/photo-1591047139829-d91aecb6caea?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Брюки">
                        <div class="category-overlay">
                            <h3>Брюки</h3>
                        </div>
                    </a>
                    
                    <a href="#" class="category-card nav-link" data-page="shirts">
                        <img src="https://images.unsplash.com/photo-1595341888016-a392ef81b7de?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Рубашки">
                        <div class="category-overlay">
                            <h3>Рубашки</h3>
                        </div>
                    </a>
                    
                    <a href="#" class="category-card nav-link" data-page="accessories">
                        <img src="https://images.unsplash.com/photo-1617137968427-85924c800a22?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Аксессуары">
                        <div class="category-overlay">
                            <h3>Аксессуары</h3>
                        </div>
                    </a>
                    
                    <a href="#" class="category-card nav-link" data-page="new-collection">
                        <img src="https://images.unsplash.com/photo-1604644641890-0bd678c83788?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Новые поступления">
                        <div class="category-overlay">
                            <h3>Новые поступления</h3>
                        </div>
                    </a>
                </div>
            </div>
        </section>

        <!-- Featured Products -->
        <section class="featured-products">
            <div class="container">
                <div class="section-header">
                    <h2>Бестселлеры</h2>
                    <p>Самые популярные модели сезона</p>
                </div>
                
                <div class="products-grid">
                    <!-- Product 1 -->
                    <div class="product-card">
                        <div class="product-image" data-id="1">
                            <img src="https://images.unsplash.com/photo-1593030761757-71fae45fa0e7?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Костюм">
                            <div class="product-actions">
                                <div class="action-btn" data-id="1">
                                    <i class="far fa-heart"></i>
                                </div>
                            </div>
                        </div>
                        <div class="product-info">
                            <h3 class="product-title" data-id="1">Костюм тройка в клетку</h3>
                            <!-- Добавлен сезон над материалом -->
                            <div class="product-seasonality">Сезон: Весна-Осень, Зима</div>
                            <div class="product-material">Материал: Шерсть 90%, Кашемир 10%</div>
                            <div class="product-price">
                                <div class="price">39 990 ₽</div>
                                <button class="add-to-cart" data-id="1">
                                    <i class="fas fa-shopping-bag"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Product 2 -->
                    <div class="product-card">
                        <div class="product-image" data-id="2">
                            <img src="https://images.unsplash.com/photo-1622288432450-277d0b1f5bb8?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Пиджак">
                            <div class="product-actions">
                                <div class="action-btn" data-id="2">
                                    <i class="far fa-heart"></i>
                                </div>
                            </div>
                        </div>
                        <div class="product-info">
                            <h3 class="product-title" data-id="2">Шерстяной пиджак в елочку</h3>
                            <!-- Добавлен сезон над материалом -->
                            <div class="product-seasonality">Сезон: Лето, Весна-Осень</div>
                            <div class="product-material">Материал: Шерсть 100%</div>
                            <div class="product-price">
                                <div class="price">26 990 ₽</div>
                                <button class="add-to-cart" data-id="2">
                                    <i class="fas fa-shopping-bag"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Product 3 -->
                    <div class="product-card">
                        <div class="product-image" data-id="3">
                            <img src="https://images.unsplash.com/photo-1525450824786-227cbef70703?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Рубашка">
                            <div class="product-actions">
                                <div class="action-btn" data-id="3">
                                    <i class="far fa-heart"></i>
                                </div>
                            </div>
                        </div>
                        <div class="product-info">
                            <h3 class="product-title" data-id="3">Хлопковая рубашка с воротником</h3>
                            <!-- Добавлен сезон над материалом -->
                            <div class="product-seasonality">Сезон: Лето</div>
                            <div class="product-material">Материал: Хлопок 100%</div>
                            <div class="product-price">
                                <div class="price">8 490 ₽</div>
                                <button class="add-to-cart" data-id="3">
                                    <i class="fas fa-shopping-bag"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Product 4 -->
                    <div class="product-card">
                        <div class="product-image" data-id="4">
                            <img src="https://images.unsplash.com/photo-1591047139829-d91aecb6caea?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Брюки">
                            <div class="product-actions">
                                <div class="action-btn" data-id="4">
                                    <i class="far fa-heart"></i>
                                </div>
                            </div>
                        </div>
                        <div class="product-info">
                            <h3 class="product-title" data-id="4">Классические брюки с защипами</h3>
                            <!-- Добавлен сезон над материалом -->
                            <div class="product-seasonality">Сезон: Весна-Осень</div>
                            <div class="product-material">Материал: Шерсть 85%, Эластан 15%</div>
                            <div class="product-price">
                                <div class="price">12 990 ₽</div>
                                <button class="add-to-cart" data-id="4">
                                    <i class="fas fa-shopping-bag"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section class="about-section">
            <div class="container">
                <div class="about-container">
                    <div class="about-image">
                        <img src="https://images.unsplash.com/photo-1596726895387-ea7b761c1a91?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="О нас">
                    </div>
                    <div class="about-content">
                        <h2>Философия Heritage</h2>
                        <p>Мы создаем одежду, которая сочетает в себе традиции классического кроя и современные тенденции. Каждое изделие - это результат кропотливой работы мастеров с многолетним опытом.</p>
                        <p>Наш подход основан на трех принципах: исключительное качество материалов, внимание к деталям и безупречная посадка. Мы используем только натуральные ткани премиального класса от ведущих европейских производителей.</p>
                        <p>Heritage - это не просто одежда, это инвестиция в ваш стиль и уверенность в себе на долгие годы.</p>
                        <a href="#" class="btn btn-outline">История бренда</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Newsletter -->
        <section class="newsletter">
            <div class="container">
                <h2>Подпишитесь на новости</h2>
                <p>Первыми узнавайте о новых коллекциях и эксклюзивных предложениях</p>
                <form class="newsletter-form">
                    <input type="email" placeholder="Ваш email адрес" required>
                    <button type="submit">Подписаться</button>
                </form>
            </div>
        </section>
    </section>

    <!-- Category Pages -->
    <section id="suits" class="page-section">
        <div class="container">
            <div class="section-header">
                <h2>Костюмы</h2>
                <p>Коллекция классических мужских костюмов</p>
            </div>

            <button class="filter-toggle"><i class="fas fa-filter"></i> Фильтр</button>
            
            <!-- Фильтры ПОД каталогами -->
            <div class="filters-container">
                <div class="filters-header">
                    <h2>Фильтры</h2>
                    <button class="reset-filters">
                        <i class="fas fa-times"></i> Сбросить все
                    </button>
                </div>
                
                <div class="filters-grid">
                    <!-- Фильтр по цене с двумя полями ввода -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Цена</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="price-filter">
                                <div class="price-inputs">
                                    <div class="price-input-group">
                                        <input type="number" class="price-input" id="min-price-input" placeholder="От" min="0" max="100000" step="1000">
                                        <span>₽</span>
                                    </div>
                                    <div class="price-input-group">
                                        <input type="number" class="price-input" id="max-price-input" placeholder="До" min="0" max="100000" step="1000">
                                        <span>₽</span>
                                    </div>
                                </div>
                                <button class="apply-price">OK</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Фильтр по сезонности -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Сезон</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="season-filter">
                                <label><input type="checkbox" name="season" value="лето"> Лето</label>
                                <label><input type="checkbox" name="season" value="весна-осень"> Весна-Осень</label>
                                <label><input type="checkbox" name="season" value="зима"> Зима</label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Фильтр по цвету с множественным выбором -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Цвет</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="color-options">
                                <div class="color-option" data-color="черный" style="background-color: #000;"></div>
                                <div class="color-option" data-color="синий" style="background-color: #0000FF;"></div>
                                <div class="color-option" data-color="серый" style="background-color: #808080;"></div>
                                <div class="color-option" data-color="белый" style="background-color: #FFFFFF; border: 1px solid #ccc;"></div>
                                <div class="color-option" data-color="бордовый" style="background-color: #6d1a36;"></div>
                                <div class="color-option" data-color="бежевый" style="background-color: #f5f5dc;"></div>
                                <div class="color-option" data-color="зеленый" style="background-color: #008000;"></div>
                                <div class="color-option" data-color="коричневый" style="background-color: #a52a2a;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Фильтр по наличию -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Наличие</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="stock-filter">
                                <label><input type="checkbox" class="in-stock"> Только в наличии</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="active-filters" id="active-filters"></div>
            </div>
            
            <div class="products-grid">
                <!-- Товары будут загружены динамически -->
            </div>
        </div>
    </section>

    <section id="jackets" class="page-section">
        <div class="container">
            <div class="section-header">
                <h2>Пиджаки</h2>
                <p>Отдельные пиджаки для любого случая</p>
            </div>

            <button class="filter-toggle"><i class="fas fa-filter"></i> Фильтр</button>
            
            <!-- Фильтры ПОД каталогами -->
            <div class="filters-container">
                <div class="filters-header">
                    <h2>Фильтры</h2>
                    <button class="reset-filters">
                        <i class="fas fa-times"></i> Сбросить все
                    </button>
                </div>
                
                <div class="filters-grid">
                    <!-- Фильтр по цене с двумя полями ввода -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Цена</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="price-filter">
                                <div class="price-inputs">
                                    <div class="price-input-group">
                                        <input type="number" class="price-input" id="min-price-input" placeholder="От" min="0" max="100000" step="1000">
                                        <span>₽</span>
                                    </div>
                                    <div class="price-input-group">
                                        <input type="number" class="price-input" id="max-price-input" placeholder="До" min="0" max="100000" step="1000">
                                        <span>₽</span>
                                    </div>
                                </div>
                                <button class="apply-price">OK</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Фильтр по сезонности -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Сезон</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="season-filter">
                                <label><input type="checkbox" name="season" value="лето"> Лето</label>
                                <label><input type="checkbox" name="season" value="весна-осень"> Весна-Осень</label>
                                <label><input type="checkbox" name="season" value="зима"> Зима</label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Фильтр по цвету с множественным выбором -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Цвет</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="color-options">
                                <div class="color-option" data-color="черный" style="background-color: #000;"></div>
                                <div class="color-option" data-color="синий" style="background-color: #0000FF;"></div>
                                <div class="color-option" data-color="серый" style="background-color: #808080;"></div>
                                <div class="color-option" data-color="белый" style="background-color: #FFFFFF; border: 1px solid #ccc;"></div>
                                <div class="color-option" data-color="бордовый" style="background-color: #6d1a36;"></div>
                                <div class="color-option" data-color="бежевый" style="background-color: #f5f5dc;"></div>
                                <div class="color-option" data-color="зеленый" style="background-color: #008000;"></div>
                                <div class="color-option" data-color="коричневый" style="background-color: #a52a2a;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Фильтр по наличию -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Наличие</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="stock-filter">
                                <label><input type="checkbox" class="in-stock"> Только в наличии</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="active-filters" id="active-filters"></div>
            </div>
            
            <div class="products-grid">
                <!-- Товары будут загружены динамически -->
            </div>
        </div>
    </section>

    <section id="pants" class="page-section">
        <div class="container">
            <div class="section-header">
                <h2>Брюки</h2>
                <p>Классические брюки для идеальной посадки</p>
            </div>

            <button class="filter-toggle"><i class="fas fa-filter"></i> Фильтр</button>
            
            <!-- Фильтры ПОД каталогами -->
            <div class="filters-container">
                <div class="filters-header">
                    <h2>Фильтры</h2>
                    <button class="reset-filters">
                        <i class="fas fa-times"></i> Сбросить все
                    </button>
                </div>
                
                <div class="filters-grid">
                    <!-- Фильтр по цене с двумя полями ввода -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Цена</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="price-filter">
                                <div class="price-inputs">
                                    <div class="price-input-group">
                                        <input type="number" class="price-input" id="min-price-input" placeholder="От" min="0" max="100000" step="1000">
                                        <span>₽</span>
                                    </div>
                                    <div class="price-input-group">
                                        <input type="number" class="price-input" id="max-price-input" placeholder="До" min="0" max="100000" step="1000">
                                        <span>₽</span>
                                    </div>
                                </div>
                                <button class="apply-price">OK</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Фильтр по сезонности -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Сезон</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="season-filter">
                                <label><input type="checkbox" name="season" value="лето"> Лето</label>
                                <label><input type="checkbox" name="season" value="весна-осень"> Весна-Осень</label>
                                <label><input type="checkbox" name="season" value="зима"> Зима</label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Фильтр по цвету с множественным выбором -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Цвет</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="color-options">
                                <div class="color-option" data-color="черный" style="background-color: #000;"></div>
                                <div class="color-option" data-color="синий" style="background-color: #0000FF;"></div>
                                <div class="color-option" data-color="серый" style="background-color: #808080;"></div>
                                <div class="color-option" data-color="белый" style="background-color: #FFFFFF; border: 1px solid #ccc;"></div>
                                <div class="color-option" data-color="бордовый" style="background-color: #6d1a36;"></div>
                                <div class="color-option" data-color="бежевый" style="background-color: #f5f5dc;"></div>
                                <div class="color-option" data-color="зеленый" style="background-color: #008000;"></div>
                                <div class="color-option" data-color="коричневый" style="background-color: #a52a2a;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Фильтр по наличию -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Наличие</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="stock-filter">
                                <label><input type="checkbox" class="in-stock"> Только в наличии</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="active-filters" id="active-filters"></div>
            </div>
            
            <div class="products-grid">
                <!-- Товары будут загружены динамически -->
            </div>
        </div>
    </section>

    <section id="shirts" class="page-section">
        <div class="container">
            <div class="section-header">
                <h2>Рубашки</h2>
                <p>Рубашки из натуральных тканей</p>
            </div>

            <button class="filter-toggle"><i class="fas fa-filter"></i> Фильтр</button>
            
            <!-- Фильтры ПОД каталогами -->
            <div class="filters-container">
                <div class="filters-header">
                    <h2>Фильтры</h2>
                    <button class="reset-filters">
                        <i class="fas fa-times"></i> Сбросить все
                    </button>
                </div>
                
                <div class="filters-grid">
                    <!-- Фильтр по цене с двумя полями ввода -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Цена</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="price-filter">
                                <div class="price-inputs">
                                    <div class="price-input-group">
                                        <input type="number" class="price-input" id="min-price-input" placeholder="От" min="0" max="100000" step="1000">
                                        <span>₽</span>
                                    </div>
                                    <div class="price-input-group">
                                        <input type="number" class="price-input" id="max-price-input" placeholder="До" min="0" max="100000" step="1000">
                                        <span>₽</span>
                                    </div>
                                </div>
                                <button class="apply-price">OK</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Фильтр по сезонности -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Сезон</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="season-filter">
                                <label><input type="checkbox" name="season" value="лето"> Лето</label>
                                <label><input type="checkbox" name="season" value="весна-осень"> Весна-Осень</label>
                                <label><input type="checkbox" name="season" value="зима"> Зима</label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Фильтр по цвету с множественным выбором -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Цвет</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="color-options">
                                <div class="color-option" data-color="черный" style="background-color: #000;"></div>
                                <div class="color-option" data-color="синий" style="background-color: #0000FF;"></div>
                                <div class="color-option" data-color="серый" style="background-color: #808080;"></div>
                                <div class="color-option" data-color="белый" style="background-color: #FFFFFF; border: 1px solid #ccc;"></div>
                                <div class="color-option" data-color="бордовый" style="background-color: #6d1a36;"></div>
                                <div class="color-option" data-color="бежевый" style="background-color: #f5f5dc;"></div>
                                <div class="color-option" data-color="зеленый" style="background-color: #008000;"></div>
                                <div class="color-option" data-color="коричневый" style="background-color: #a52a2a;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Фильтр по наличию -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Наличие</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="stock-filter">
                                <label><input type="checkbox" class="in-stock"> Только в наличии</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="active-filters" id="active-filters"></div>
            </div>
            
            <div class="products-grid">
                <!-- Товары будут загружены динамически -->
            </div>
        </div>
    </section>

    <section id="accessories" class="page-section">
        <div class="container">
            <div class="section-header">
                <h2>Аксессуары</h2>
                <p>Завершите ваш образ идеальными аксессуарами</p>
            </div>

            <button class="filter-toggle"><i class="fas fa-filter"></i> Фильтр</button>
            
            <!-- Фильтры ПОД каталогами -->
            <div class="filters-container">
                <div class="filters-header">
                    <h2>Фильтры</h2>
                    <button class="reset-filters">
                        <i class="fas fa-times"></i> Сбросить все
                    </button>
                </div>
                
                <div class="filters-grid">
                    <!-- Фильтр по цене с двумя полями ввода -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Цена</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="price-filter">
                                <div class="price-inputs">
                                    <div class="price-input-group">
                                        <input type="number" class="price-input" id="min-price-input" placeholder="От" min="0" max="100000" step="1000">
                                        <span>₽</span>
                                    </div>
                                    <div class="price-input-group">
                                        <input type="number" class="price-input" id="max-price-input" placeholder="До" min="0" max="100000" step="1000">
                                        <span>₽</span>
                                    </div>
                                </div>
                                <button class="apply-price">OK</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Фильтр по сезонности -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Сезон</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="season-filter">
                                <label><input type="checkbox" name="season" value="лето"> Лето</label>
                                <label><input type="checkbox" name="season" value="весна-осень"> Весна-Осень</label>
                                <label><input type="checkbox" name="season" value="зима"> Зима</label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Фильтр по цвету с множественным выбором -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Цвет</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="color-options">
                                <div class="color-option" data-color="черный" style="background-color: #000;"></div>
                                <div class="color-option" data-color="синий" style="background-color: #0000FF;"></div>
                                <div class="color-option" data-color="серый" style="background-color: #808080;"></div>
                                <div class="color-option" data-color="белый" style="background-color: #FFFFFF; border: 1px solid #ccc;"></div>
                                <div class="color-option" data-color="бордовый" style="background-color: #6d1a36;"></div>
                                <div class="color-option" data-color="бежевый" style="background-color: #f5f5dc;"></div>
                                <div class="color-option" data-color="зеленый" style="background-color: #008000;"></div>
                                <div class="color-option" data-color="коричневый" style="background-color: #a52a2a;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Фильтр по наличию -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Наличие</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="stock-filter">
                                <label><input type="checkbox" class="in-stock"> Только в наличии</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="active-filters" id="active-filters"></div>
            </div>
            
            <div class="products-grid">
                <!-- Товары будут загружены динамически -->
            </div>
        </div>
    </section>

    <section id="new-collection" class="page-section">
        <div class="container">
            <div class="section-header">
                <h2>Новые поступления</h2>
                <p>Современная классика для настоящих джентльменов</p>
            </div>

            <button class="filter-toggle"><i class="fas fa-filter"></i> Фильтр</button>
            
            <!-- Фильтры ПОД каталогами -->
            <div class="filters-container">
                <div class="filters-header">
                    <h2>Фильтры</h2>
                    <button class="reset-filters">
                        <i class="fas fa-times"></i> Сбросить все
                    </button>
                </div>
                
                <div class="filters-grid">
                    <!-- Фильтр по цене с двумя полями ввода -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Цена</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="price-filter">
                                <div class="price-inputs">
                                    <div class="price-input-group">
                                        <input type="number" class="price-input" id="min-price-input" placeholder="От" min="0" max="100000" step="1000">
                                        <span>₽</span>
                                    </div>
                                    <div class="price-input-group">
                                        <input type="number" class="price-input" id="max-price-input" placeholder="До" min="0" max="100000" step="1000">
                                        <span>₽</span>
                                    </div>
                                </div>
                                <button class="apply-price">OK</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Фильтр по сезонности -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Сезон</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="season-filter">
                                <label><input type="checkbox" name="season" value="лето"> Лето</label>
                                <label><input type="checkbox" name="season" value="весна-осень"> Весна-Осень</label>
                                <label><input type="checkbox" name="season" value="зима"> Зима</label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Фильтр по цвету с множественным выбором -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Цвет</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="color-options">
                                <div class="color-option" data-color="черный" style="background-color: #000;"></div>
                                <div class="color-option" data-color="синий" style="background-color: #0000FF;"></div>
                                <div class="color-option" data-color="серый" style="background-color: #808080;"></div>
                                <div class="color-option" data-color="белый" style="background-color: #FFFFFF; border: 1px solid #ccc;"></div>
                                <div class="color-option" data-color="бордовый" style="background-color: #6d1a36;"></div>
                                <div class="color-option" data-color="бежевый" style="background-color: #f5f5dc;"></div>
                                <div class="color-option" data-color="зеленый" style="background-color: #008000;"></div>
                                <div class="color-option" data-color="коричневый" style="background-color: #a52a2a;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Фильтр по наличию -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Наличие</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="stock-filter">
                                <label><input type="checkbox" class="in-stock"> Только в наличии</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="active-filters" id="active-filters"></div>
            </div>
            
            <div class="products-grid">
                <!-- Товары будут загружены динамически -->
            </div>
        </div>
    </section>

    <!-- All Products Page -->
    <section id="all" class="page-section">
        <div class="container">
            <div class="section-header">
                <h2>Весь ассортимент</h2>
                <p>Полная коллекция классической мужской одежды</p>
            </div>
            
            <!-- Навигация по категориям ПЕРЕД фильтрами -->
            <div class="category-nav">
                <a href="#" class="category-link active" data-category="all">Весь ассортимент</a>
                <a href="#" class="category-link" data-category="suits">Костюмы</a>
                <a href="#" class="category-link" data-category="jackets">Пиджаки</a>
                <a href="#" class="category-link" data-category="pants">Брюки</a>
                <a href="#" class="category-link" data-category="shirts">Рубашки</a>
                <a href="#" class="category-link" data-category="accessories">Аксессуары</a>
                <a href="#" class="category-link highlight" data-category="new-collection">Новые поступления</a>
            </div>

            <button class="filter-toggle"><i class="fas fa-filter"></i> Фильтр</button>
            
            <!-- Фильтры ПОД каталогами -->
            <div class="filters-container">
                <div class="filters-header">
                    <h2>Фильтры</h2>
                    <button class="reset-filters">
                        <i class="fas fa-times"></i> Сбросить все
                    </button>
                </div>
                
                <div class="filters-grid">
                    <!-- Фильтр по цене с двумя полями ввода -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Цена</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="price-filter">
                                <div class="price-inputs">
                                    <div class="price-input-group">
                                        <input type="number" class="price-input" id="min-price-input" placeholder="От" min="0" max="100000" step="1000">
                                        <span>₽</span>
                                    </div>
                                    <div class="price-input-group">
                                        <input type="number" class="price-input" id="max-price-input" placeholder="До" min="0" max="100000" step="1000">
                                        <span>₽</span>
                                    </div>
                                </div>
                                <button class="apply-price">OK</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Фильтр по сезонности -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Сезон</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="season-filter">
                                <label><input type="checkbox" name="season" value="лето"> Лето</label>
                                <label><input type="checkbox" name="season" value="весна-осень"> Весна-Осень</label>
                                <label><input type="checkbox" name="season" value="зима"> Зима</label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Фильтр по цвету с множественным выбором -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Цвет</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="color-options">
                                <div class="color-option" data-color="черный" style="background-color: #000;"></div>
                                <div class="color-option" data-color="синий" style="background-color: #0000FF;"></div>
                                <div class="color-option" data-color="серый" style="background-color: #808080;"></div>
                                <div class="color-option" data-color="белый" style="background-color: #FFFFFF; border: 1px solid #ccc;"></div>
                                <div class="color-option" data-color="бордовый" style="background-color: #6d1a36;"></div>
                                <div class="color-option" data-color="бежевый" style="background-color: #f5f5dc;"></div>
                                <div class="color-option" data-color="зеленый" style="background-color: #008000;"></div>
                                <div class="color-option" data-color="коричневый" style="background-color: #a52a2a;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Фильтр по наличию -->
                    <div class="filter-group">
                        <div class="filter-header">
                            <h3>Наличие</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="filter-content">
                            <div class="stock-filter">
                                <label><input type="checkbox" class="in-stock"> Только в наличии</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="active-filters" id="active-filters"></div>
            </div>
            
            <!-- Секция "Весь ассортимент" -->
            <div class="category-section active" data-category="all">
                <div class="products-grid">
                    <!-- Все товары будут загружены динамически -->
                </div>
            </div>
            
            <!-- Секция "Костюмы" -->
            <div class="category-section" data-category="suits">
                <div class="products-grid">
                    <!-- Товары категории "Костюмы" -->
                </div>
            </div>
            
            <!-- Секция "Пиджаки" -->
            <div class="category-section" data-category="jackets">
                <div class="products-grid">
                    <!-- Товары категории "Пиджаки" -->
                </div>
            </div>
            
            <!-- Секция "Брюки" -->
            <div class="category-section" data-category="pants">
                <div class="products-grid">
                    <!-- Товары категории "Брюки" -->
                </div>
            </div>
            
            <!-- Секция "Рубашки" -->
            <div class="category-section" data-category="shirts">
                <div class="products-grid">
                    <!-- Товары категории "Рубашки" -->
                </div>
            </div>
            
            <!-- Секция "Аксессуары" -->
            <div class="category-section" data-category="accessories">
                <div class="products-grid">
                    <!-- Товары категории "Аксессуары" -->
                </div>
            </div>

            <!-- Секция "Новые поступления" -->
            <div class="category-section" data-category="new-collection">
                <div class="products-grid">
                    <!-- Товары категории "Новые поступления" -->
                </div>
            </div>
        </div>
    </section>

    <!-- Wishlist Page -->
    <section id="wishlist" class="page-section">
        <div class="container">
            <div class="section-header">
                <h2>Избранное</h2>
                <p>Ваши любимые товары</p>
            </div>
            <div class="wishlist-items">
                <!-- Избранные товары будут загружены динамически -->
            </div>
        </div>
    </section>

    <!-- Cart Page -->
    <section id="cart" class="page-section">
        <div class="container">
            <div class="section-header">
                <h2>Корзина</h2>
                <p>Ваши выбранные товары</p>
            </div>
            <div class="cart-wishlist-container">
                <div class="cart-items">
                    <!-- Товары в корзине будут загружены динамически -->
                </div>
                <div class="summary">
                    <h3 class="summary-title">Итог заказа</h3>
                    <div class="summary-row">
                        <span>Товары (<span id="cart-items-count">0</span>)</span>
                        <span id="cart-subtotal">0 ₽</span>
                    </div>
                    <div class="summary-row">
                        <span>Доставка</span>
                        <span>Бесплатно</span>
                    </div>
                    <div class="summary-row">
                        <span>Скидка (5%)</span>
                        <span id="cart-discount">0 ₽</span>
                    </div>
                    <div class="summary-total">
                        <span>Итого:</span>
                        <span id="cart-total">0 ₽</span>
                    </div>
                    <button class="btn" id="checkout-btn">Оформить заказ</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Product Detail Page -->
    <section id="product-detail" class="page-section">
        <div class="container">
            <a href="#" class="back-to-products" id="back-button">
                <i class="fas fa-arrow-left"></i> Назад
            </a>
            
            <div class="product-detail-container">
                <div class="product-detail-images">
                    <div class="product-thumbnails">
                        <!-- Миниатюры будут добавлены динамически -->
                    </div>
                    <div class="product-main-image">
                        <!-- Основное изображение будет добавлено динамически -->
                    </div>
                </div>
                
                <div class="product-details">
                    <h1 class="product-detail-title" id="product-detail-name">Название товара</h1>
                    <div class="product-detail-price" id="product-detail-price">0 ₽</div>
                    
                    <!-- Добавленный блок с материалом -->
                    <div class="product-detail-material" id="product-detail-material"></div>
                    
                    <!-- Добавленный блок с силуэтом -->
                    <div class="product-detail-silhouette" id="product-detail-silhouette"></div>

                    <!-- Добавленный блок с цветом -->
                    <div class="product-detail-color" id="product-detail-color"></div>
                    
                    <!-- Секция с описанием (свернута по умолчанию) -->
                    <div class="detail-section">
                        <div class="section-header">
                            <span>Описание</span>
                            <button class="toggle-btn"><i class="fas fa-plus"></i></button>
                        </div>
                        <div class="section-content" id="product-detail-description">
                            Описание товара будет загружено здесь
                        </div>
                    </div>
                    
                    <!-- Секция с преимуществами (свернута по умолчанию) -->
                    <div class="detail-section">
                        <div class="section-header">
                            <span>Основные преимущества</span>
                            <button class="toggle-btn"><i class="fas fa-plus"></i></button>
                        </div>
                        <ul class="section-content" id="product-detail-benefits"></ul>
                    </div>
                    
                    <div class="product-options">
                        <!-- Изменено: размер и количество на одном уровне -->
                        <div class="product-options-row">
                            <div class="option-group">
                                <label for="size">Размер</label>
                                <select class="option-select" id="size">
                                    <!-- Размеры будут добавлены динамически -->
                                </select>
                            </div>
                            
                            <div class="option-group">
                                <label for="quantity">Количество</label>
                                <div class="quantity-selector">
                                    <button class="quantity-btn" id="quantity-decrement">-</button>
                                    <input type="text" class="quantity-display" id="quantity-display" value="1" readonly>
                                    <button class="quantity-btn" id="quantity-increment">+</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Изменено: кнопки на отдельной строке -->
                    <div class="product-action-buttons">
                        <button class="btn" id="add-to-cart-detail">
                            <i class="fas fa-shopping-bag"></i> Добавить в корзину
                        </button>
                        <button class="btn btn-outline" id="add-to-wishlist-detail">
                            <i class="far fa-heart"></i> В избранное
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Search Results Page -->
    <section id="search-results" class="page-section">
        <div class="container">
            <div class="section-header">
                <h2>Результаты поиска</h2>
                <p id="search-results-text"></p>
            </div>
            <div class="products-grid" id="search-results-container">
                <!-- Результаты поиска будут загружены динамически -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-container">
                <div class="footer-col">
                    <h3>Savoir Énigme</h3>
                    <p>Мужская классическая одежда ручной работы. Современный взгляд на традиционные ценности.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-telegram"></i></a>
                        <a href="#"><span style="font-weight: bold; font-size: 18px;">A</span></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                
                <div class="footer-col">
                    <h3>Коллекции</h3>
                    <ul>
                        <li><a href="#" class="nav-link" data-page="all">Весь ассортимент</a></li>
                        <li><a href="#" class="nav-link" data-page="suits">Костюмы</a></li>
                        <li><a href="#" class="nav-link" data-page="jackets">Пиджаки</a></li>
                        <li><a href="#" class="nav-link" data-page="pants">Брюки</a></li>
                        <li><a href="#" class="nav-link" data-page="shirts">Рубашки</a></li>
                        <li><a href="#" class="nav-link" data-page="accessories">Аксессуары</a></li>
                        <li><a href="#" class="nav-link" data-page="new-collection">Новые поступления</a></li>
                    </ul>
                </div>
                
                <!-- Блок "Важное" с корзиной и избранным -->
                <div class="footer-col">
                    <h3>Важное</h3>
                    <ul>
                        <li><a href="#" class="nav-link" data-page="home">Главная</a></li>
                        <li><a href="#" class="nav-link" data-page="wishlist">Избранное</a></li>
                        <li><a href="#" class="nav-link" data-page="cart">Корзина</a></li>
                    </ul>
                </div>
                
                <div class="footer-col">
                    <h3>Контакты</h3>
                    <ul>
                        <li><i class="fas fa-map-marker-alt"></i> Москва, ул. ул. Петровка, 15</li>
                        <li><i class="fas fa-phone"></i> +7 (495) 765-43-21</li>
                        <li><i class="fas fa-envelope"></i> info@savoir-enigme.ru</li>
                        <li><i class="fas fa-clock"></i> Пн-Сб: 11:00 - 20:00</li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; &copy; 2023 Savoir Énigme. Все права защищены.</p>
            </div>
        </div>
    </footer>

    <!-- Модальное окно оформления заказа -->
    <div class="modal-overlay" id="checkout-modal">
        <div class="modal">
            <div class="modal-header">
                <h2>Оформление заказа</h2>
                <button class="close-modal" id="close-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <form id="checkout-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="first-name">Имя *</label>
                            <input type="text" id="first-name" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="last-name">Фамилия *</label>
                            <input type="text" id="last-name" class="form-control" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Email *</label>
                        <input type="email" id="email" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="phone">Телефон *</label>
                        <input type="tel" id="phone" class="form-control" required>
                    </div>
                    
                    <!-- Адрес доставки с таким же стилем, как другие поля -->
                    <div class="form-group">
                        <label for="address">Адрес доставки *</label>
                        <input type="text" id="address" class="form-control" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="city">Город *</label>
                            <input type="text" id="city" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="zip">Почтовый индекс *</label>
                            <input type="text" id="zip" class="form-control" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="comment">Комментарий к заказу</label>
                        <input type="text" id="comment" class="form-control">
                    </div>
                </form>
            </div>
            
            <div class="modal-footer">
                <div class="modal-total">
                    Итого: <span id="modal-total">0 ₽</span>
                </div>
                <button class="btn" id="confirm-order">Подтвердить заказ</button>
            </div>
        </div>
    </div>

    <!-- Модальное окно быстрого добавления -->
    <div class="modal-overlay quick-add-modal" id="quick-add-modal">
        <div class="modal">
            <div class="modal-header">
                <h2>Добавить в корзину</h2>
                <button class="close-modal" id="close-quick-add">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="quick-add-header">
                    <div class="quick-add-image">
                        <img id="quick-add-img" src="" alt="">
                    </div>
                    <div>
                        <h3 class="quick-add-title" id="quick-add-title"></h3>
                        <div class="quick-add-price" id="quick-add-price"></div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="quick-size">Размер</label>
                    <select class="option-select" id="quick-size">
                        <!-- Опции будут добавлены динамически -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="quick-quantity">Количество</label>
                    <div class="quantity-selector">
                        <button class="quantity-btn" id="quick-decrement">-</button>
                        <input type="text" class="quantity-display" id="quick-quantity" value="1" readonly>
                        <button class="quantity-btn" id="quick-increment">+</button>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn" id="confirm-quick-add">Добавить в корзину</button>
            </div>
        </div>
    </div>

<script>
    // Данные о товарах
    const products = {
        1: {
            id: 1,
            name: "Костюм тройка в клетку",
            price: 39990,
            formattedPrice: "39 990 ₽",
            image: "https://images.unsplash.com/photo-1593030761757-71fae45fa0e7?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
            images: [
                "https://images.unsplash.com/photo-1593030761757-71fae45fa0e7?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                "https://images.unsplash.com/photo-1596726895387-ea7b761c1a91?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                "https://images.unsplash.com/photo-1591047139829-d91aecb6caea?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
            ],
            category: "suits",
            sizes: ["48", "50", "52", "54", "56"],
            allSizes: ["48", "50", "52", "54", "56"],
            material: "Шерсть 90%, Кашемир 10%",
            silhouette: "Классический приталенный силуэт",
            description: "Элегантный костюм тройка из высококачественной шерсти с клетчатым узором. Идеально подходит для деловых встреч и особых случаев. Костюм включает пиджак, жилет и брюки. Изготовлен из итальянской ткани с добавлением кашемира для дополнительного комфорта.",
            benefits: [
                "Идеальная посадка по фигуре",
                "Ручная работа по деталям",
                "Качественные материалы премиум сегмента",
                "Сохранение формы после многократных стирок"
            ],
            // Новые свойства для фильтров
            season: ["весна-осень", "зима"],
            color: "синий",
            inStock: true
        },
        2: {
            id: 2,
            name: "Шерстяной пиджак в елочку",
            price: 26990,
            formattedPrice: "26 990 ₽",
            image: "https://images.unsplash.com/photo-1622288432450-277d0b1f5bb8?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
            images: [
                "https://images.unsplash.com/photo-1622288432450-277d0b1f5bb8?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                "https://images.unsplash.com/photo-1617137968427-85924c800a22?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                "https://images.unsplash.com/photo-1598808503746-f34cfb6c2524?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
            ],
            category: "jackets",
            sizes: ["48", "50", "52"],
            allSizes: ["48", "50", "52", "54", "56"],
            material: "Шерсть 100%",
            silhouette: "Современный прямой силуэт",
            description: "Классический шерстяной пиджак с узором \"елочка\". Теплый и стильный вариант для прохладной погоды. Пиджак имеет современный крой, подчеркивающий фигуру, и удобную подкладку из вискозы. Идеально сочетается с джинсами или классическими брюками.",
            benefits: [
                "Теплый и стильный вариант для прохладной погоды",
                "Современный крой, подчеркивающий фигуру",
                "Удобная подкладка из вискозы",
                "Идеально сочетается с джинсами или классическими брюками"
            ],
            // Новые свойства для фильтров
            season: ["лето", "весна-осень"],
            color: "серый",
            inStock: true
        },
        3: {
            id: 3,
            name: "Хлопковая рубашка с воротником",
            price: 8490,
            formattedPrice: "8 490 ₽",
            image: "https://images.unsplash.com/photo-1525450824786-227cbef70703?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
            images: [
                "https://images.unsplash.com/photo-1525450824786-227cbef70703?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                "https://images.unsplash.com/photo-1595341888016-a392ef81b7de?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                "https://images.unsplash.com/photo-1593030103066-0093718efeb9?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
            ],
            category: "shirts",
            sizes: ["44", "46", "48", "50", "52", "54", "56"],
            allSizes: ["44", "46", "48", "50", "52", "54", "56"],
            material: "Хлопок 100%",
            silhouette: "Классический прямой силуэт",
            description: "Рубашка из 100% египетского хлопка с классическим воротником. Мягкая и дышащая ткань обеспечивает комфорт в течение всего дня. Идеально подходит как для офиса, так и для неформальных неформальных мероприятий. Доступна в различных цветах.",
            benefits: [
                "Мягкая и дышащая ткань",
                "Комфорт в течение всего дня",
                "Идеально подходит для офиса и неформальных мероприятий",
                "Доступна в различных цветах"
            ],
            // Новые свойства для фильтров
            season: ["лето"],
            color: "белый",
            inStock: true
        },
        4: {
            id: 4,
            name: "Классические брюки с защипами",
            price: 12990,
            formattedPrice: "12 990 ₽",
            image: "https://images.unsplash.com/photo-1591047139829-d91aecb6caea?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
            images: [
                "https://images.unsplash.com/photo-1591047139829-d91aecb6caea?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                "https://images.unsplash.com/photo-1598808503746-f34cfb6c2524?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                "https://images.unsplash.com/photo-1622288432450-277d0b1f5bb8?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
            ],
            category: "pants",
            sizes: ["46", "48", "50", "52", "54"],
            allSizes: ["44", "46", "48", "50", "52", "54", "56"],
            material: "Шерсть 85%, Эластан 15%",
            silhouette: "Узкий прямой силуэт",
            description: "Классические брюки прямого кроя с защипами на поясе. Изготовлены из смесовой ткани (шерсть с эластаном) для идеальной посадки и комфорта. Подходят как к пиджакам, так и к кардиганам и джемперам. Идеальный выбор для делового гардероба.",
            benefits: [
                "Идеальная посадка и комфорт",
                "Подходят к пиджакам, кардиганам и джемперам",
                "Идеальный выбор для делового гардероба",
                "Защипы на поясе для удобства"
            ],
            // Новые свойства для фильтров
            season: ["весна-осень"],
            color: "черный",
            inStock: false // Нет в наличии
        },
        5: {
            id: 5,
            name: "Костюм из твида с подкладом",
            price: 45990,
            formattedPrice: "45 990 ₽",
            image: "https://images.unsplash.com/photo-1604644641890-0bd678c83788?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
            images: [
                "https://images.unsplash.com/photo-1604644641890-0bd678c83788?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                "https://images.unsplash.com/photo-1593030103066-0093718efeb9?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                "https://images.unsplash.com/photo-1593030761757-71fae45fa0e7?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
            ],
            category: "new-collection",
            sizes: ["48", "50", "52", "54", "56"],
            allSizes: ["48", "50", "52", "54", "56"],
            material: "Шерсть 100%",
            silhouette: "Классический приталенный силуэт",
            description: "Элегантный костюм из твида с теплым подкладом. Идеален для осенне-зимнего сезона. Состоит из пиджака и брюк с идеальной посадкой. Ткань - 100% шерсть с добавлением кашемира.",
            benefits: [
                "Идеален для осенне-зимнего сезона",
                "Теплый подклад для комфорта",
                "Идеальная посадка",
                "Качественные материалы"
            ],
            // Новые свойства для фильтров
            season: ["зима"],
            color: "бордовый",
            inStock: true
        },
        6: {
            id: 6,
            name: "Кашемировое пальто",
            price: 68990,
            formattedPrice: "68 990 ₽",
            image: "https://images.unsplash.com/photo-1598808503746-f34cfb6c2524?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
            images: [
                "https://images.unsplash.com/photo-1598808503746-f34cfb6c2524?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                "https://images.unsplash.com/photo-1617137968427-85924c800a22?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                "https://images.unsplash.com/photo-1622288432450-277d0b1f5bb8?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
            ],
            category: "new-collection",
            sizes: ["48", "50", "52", "54", "56"],
            allSizes: ["48", "50", "52", "54", "56"],
            material: "Кашемир 80%, Шерсть 20%",
            silhouette: "Прямой силуэт с воротником-стойкой",
            description: "Теплое кашемировое пальто прямого кроя прямого с воротником-стойкой. Изготовлено из из смеси кашемира и шерсти (80/20). Имеет внутренние карманы и кожаные детали отделки.",
            benefits: [
                "Теплое кашемировое пальто",
                "Воротник-стойка для защиты от ветра",
                "Внутренние карманы для удобства",
                "Кожаные детали отделки"
            ],
            // Новые свойства для фильтров
            season: ["зима"],
            color: "черный",
            inStock: true
        }
    };

    // Корзина и избранное
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let wishlist = JSON.parse(localStorage.getItem('wishlist')) || {};
    let currentProductId = null;
    let navigationHistory = [{page: 'home'}];
    let scrollPositions = {}; // Для сохранения позиций скролла
    let lastPage = null; // Для отслеживания последней страницы

    // DOM элементы
    const cartItemsEl = document.querySelector('.cart-items');
    const wishlistItemsEl = document.querySelector('.wishlist-items');
    const pageSections = document.querySelectorAll('.page-section');
    const navLinks = document.querySelectorAll('.nav-link');
    const notification = document.getElementById('notification');
    const notificationText = document.getElementById('notification-text');
    
    // Элементы бургер-меню
    const burgerMenu = document.getElementById('burger-menu');
    const mobileMenu = document.getElementById('mobile-menu');
    const closeMenu = document.getElementById('close-menu');
    const menuOverlay = document.getElementById('menu-overlay');
    const mobileCartCount = document.getElementById('mobile-cart-count');
    const mobileWishlistCount = document.getElementById('mobile-wishlist-count');
    const mobileSearchInput = document.getElementById('mobile-search-input');
    
    // Элементы модального окна
    const checkoutModal = document.getElementById('checkout-modal');
    const closeModalBtn = document.getElementById('close-modal');
    const confirmOrderBtn = document.getElementById('confirm-order');
    const modalTotalEl = document.getElementById('modal-total');
    const checkoutBtn = document.getElementById('checkout-btn');
    
    // Элементы страницы товара
    const productDetailName = document.getElementById('product-detail-name');
    const productDetailPrice = document.getElementById('product-detail-price');
    const productDetailMaterial = document.getElementById('product-detail-material');
    const productDetailSilhouette = document.getElementById('product-detail-silhouette');
    const productDetailColor = document.getElementById('product-detail-color');
    const productDetailDescription = document.getElementById('product-detail-description');
    const productDetailBenefits = document.getElementById('product-detail-benefits');
    const addToCartDetailBtn = document.getElementById('add-to-cart-detail');
    const addToWishlistDetailBtn = document.getElementById('add-to-wishlist-detail');
    const quantityDecrementBtn = document.getElementById('quantity-decrement');
    const quantityIncrementBtn = document.getElementById('quantity-increment');
    const quantityDisplay = document.getElementById('quantity-display');
    const backButton = document.getElementById('back-button');

    // Элементы модального окна быстрого добавления
    const quickAddModal = document.getElementById('quick-add-modal');
    const closeQuickAdd = document.getElementById('close-quick-add');
    const confirmQuickAdd = document.getElementById('confirm-quick-add');
    const quickAddImg = document.getElementById('quick-add-img');
    const quickAddTitle = document.getElementById('quick-add-title');
    const quickAddPrice = document.getElementById('quick-add-price');
    const quickSize = document.getElementById('quick-size');
    const quickQuantity = document.getElementById('quick-quantity');
    const quickDecrement = document.getElementById('quick-decrement');
    const quickIncrement = document.getElementById('quick-increment');
    let quickAddProductId = null;

    // Состояние фильтров
    let currentFilters = {
        minPrice: 0,
        maxPrice: 100000,
        seasons: [],
        colors: [], // Массив для выбранных цветов
        inStock: false
    };

    // Описания категорий для страницы "all"
    const categoryDescriptions = {
        'all': {
            title: 'Весь ассортимент',
            description: 'Полная коллекция классической мужской одежды'
        },
        'suits': {
            title: 'Костюмы',
            description: 'Коллекция классических мужских костюмов'
        },
        'jackets': {
            title: 'Пиджаки',
            description: 'Отдельные пиджаки для любого случая'
        },
        'pants': {
            title: 'Брюки',
            description: 'Классические брюки для идеальной посадки'
        },
        'shirts': {
            title: 'Рубашки',
            description: 'Рубашки из натуральных тканей'
        },
        'accessories': {
            title: 'Аксессуары',
            description: 'Завершите ваш образ идеальными аксессуарами'
        },
        'new-collection': {
            title: 'Новые поступления',
            description: 'Современная классика для настоящих джентльменов'
        }
    };

    // Инициализация
    document.addEventListener('DOMContentLoaded', function() {
        // Навигация по страницам
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const page = this.getAttribute('data-page');
                const category = this.getAttribute('data-category');
                delete scrollPositions[page];
                navigateToPage(page, category);
            });
        });
        
        // Обработчики для кнопок добавления в корзину
        document.querySelectorAll('.add-to-cart').forEach(button => {
            button.addEventListener('click', function(e) {
                e.stopPropagation(); // Предотвращаем всплытие
                const productId = parseInt(this.getAttribute('data-id'));
                openQuickAddModal(productId);
            });
        });
        
        // Обработчики для кнопок избранного
        document.querySelectorAll('.action-btn[data-id]').forEach(button => {
            button.addEventListener('click', function(e) {
                e.stopPropagation(); // Предотвращаем всплытие
                const productId = parseInt(this.getAttribute('data-id'));
                toggleWishlist(productId, this);
            });
        });
        
        // Обработчики для открытия страницы товара по клику на карточку
        document.querySelectorAll('.product-card').forEach(card => {
            card.addEventListener('click', function(e) {
                if (window.getSelection().toString().length > 0) {
                    return;
                }
                if (e.target.closest('.action-btn') || e.target.closest('.add-to-cart')) {
                    return; // Игнорируем клики на кнопках
                }
                const productId = parseInt(this.querySelector('[data-id]').getAttribute('data-id'));
                showProductDetail(productId);
            });
        });
        
        // Обработчики для бургер-меню
        burgerMenu.addEventListener('click', openMobileMenu);
        closeMenu.addEventListener('click', closeMobileMenu);
        menuOverlay.addEventListener('click', closeMobileMenu);
        
        // Обработчики для ссылок в мобильном меню
        document.querySelectorAll('#mobile-menu .nav-link').forEach(link => {
            link.addEventListener('click', function() {
                closeMobileMenu();
                const page = this.getAttribute('data-page');
                const category = this.getAttribute('data-category');
                delete scrollPositions[page];
                navigateToPage(page, category);
            });
        });
        
        // Обработчики для модального окна
        checkoutBtn.addEventListener('click', openCheckoutModal);
        closeModalBtn.addEventListener('click', closeCheckoutModal);
        confirmOrderBtn.addEventListener('click', confirmOrder);
        
        // Закрытие модального окна при клике на оверлей
        checkoutModal.addEventListener('click', function(e) {
            if (e.target === checkoutModal) {
                closeCheckoutModal();
            }
        });
        
        // Обработчики для страницы товара
        addToCartDetailBtn.addEventListener('click', addToCartFromDetail);
        addToWishlistDetailBtn.addEventListener('click', addToWishlistFromDetail);
        quantityDecrementBtn.addEventListener('click', decreaseQuantity);
        quantityIncrementBtn.addEventListener('click', increaseQuantity);
        backButton.addEventListener('click', goBack);
        
        // Делегация для сворачивания/разворачивания секций
        document.addEventListener('click', function(e) {
            const header = e.target.closest('.detail-section .section-header');
            if (header) {
                const content = header.nextElementSibling;
                const icon = header.querySelector('i');
                content.classList.toggle('active');
                icon.className = content.classList.contains('active') ? 'fas fa-minus' : 'fas fa-plus';
            }
        });
        
        // Обработчики для быстрого добавления
        closeQuickAdd.addEventListener('click', closeQuickAddModal);
        confirmQuickAdd.addEventListener('click', addToCartFromQuick);
        quickDecrement.addEventListener('click', () => updateQuickQuantity(-1));
        quickIncrement.addEventListener('click', () => updateQuickQuantity(1));
        
        // Закрытие по оверлею
        quickAddModal.addEventListener('click', function(e) {
            if (e.target === quickAddModal) {
                closeQuickAddModal();
            }
        });
        
        // Поиск в мобильном бургер-меню
        mobileSearchInput.addEventListener('keyup', function(e) {
            if (e.key === 'Enter') {
                performSearch(this.value);
                closeMobileMenu();
            }
        });
        
        // Добавление новых товаров в новую коллекцию
        const newCollectionContainer = document.querySelector('#new-collection .products-grid');
        if (newCollectionContainer) {
            [5, 6].forEach(productId => {
                if (products[productId]) {
                    const productCard = createProductCard(products[productId]);
                    newCollectionContainer.appendChild(productCard);
                    
                    // Добавление обработчиков для новой карточки
                    productCard.addEventListener('click', function(e) {
                        if (window.getSelection().toString().length > 0) {
                            return;
                        }
                        if (e.target.closest('.action-btn') || e.target.closest('.add-to-cart')) {
                            return;
                        }
                        showProductDetail(products[productId].id);
                    });
                    
                    productCard.querySelector('.add-to-cart').addEventListener('click', function(e) {
                        e.stopPropagation();
                        openQuickAddModal(products[productId].id);
                    });
                    
                    productCard.querySelector('.action-btn[data-id]').addEventListener('click', function(e) {
                        e.stopPropagation();
                        toggleWishlist(products[productId].id, this);
                    });
                }
            });
        }
        
        // Обработчики для категорий на странице "Весь ассортимент"
        document.querySelectorAll('#all .category-link[data-category]').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const category = this.getAttribute('data-category');
                navigationHistory[navigationHistory.length - 1].category = category;
                activateCategory(category);
            });
        });
        
        // Обработчики для фильтров
        setupFilters();
        
        // Инициализация счетчиков
        updateCart();
        updateWishlist();
        
        // Обновление всех иконок избранного после загрузки
        updateAllFavoriteIcons();
    });

    // Функция для обновления всех иконок избранного на странице
    function updateAllFavoriteIcons() {
        document.querySelectorAll('.action-btn[data-id]').forEach(button => {
            const productId = parseInt(button.getAttribute('data-id'));
            const isInWishlist = wishlist[productId] ? true : false;
            const heartIcon = button.querySelector('i');
            if (isInWishlist) {
                button.classList.add('favorite');
                heartIcon.classList.remove('far');
                heartIcon.classList.add('fas');
            } else {
                button.classList.remove('favorite');
                heartIcon.classList.remove('fas');
                heartIcon.classList.add('far');
            }
        });
    }

    // Настройка обработчиков фильтров
    function setupFilters() {
        // Обработчики для заголовков фильтров
        document.querySelectorAll('.filter-header').forEach(header => {
            header.addEventListener('click', function() {
                const group = this.parentElement;
                group.classList.toggle('active');
            });
        });

        // Чекбоксы сезонов
        document.querySelectorAll('input[name="season"]').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                if (this.checked) {
                    currentFilters.seasons.push(this.value);
                } else {
                    currentFilters.seasons = currentFilters.seasons.filter(s => s !== this.value);
                }
                applyFilters();
                updateActiveFilters();
            });
        });
        
        // Выбор цвета (множественный)
        document.querySelectorAll('.color-option').forEach(option => {
            option.addEventListener('click', function() {
                const color = this.getAttribute('data-color');
                
                const index = currentFilters.colors.indexOf(color);
                if (index >= 0) {
                    currentFilters.colors.splice(index, 1);
                    this.classList.remove('active');
                } else {
                    currentFilters.colors.push(color);
                    this.classList.add('active');
                }
                
                applyFilters();
                updateActiveFilters();
            });
        });
        
        // Наличие
        document.querySelectorAll('.in-stock').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                currentFilters.inStock = this.checked;
                applyFilters();
                updateActiveFilters();
            });
        });
        
        // Кнопка сброса фильтров
        document.querySelectorAll('.reset-filters').forEach(button => {
            button.addEventListener('click', resetFilters);
        });

        // Обработчик для кнопок OK в цене
        document.querySelectorAll('.apply-price').forEach(button => {
            button.addEventListener('click', function(e) {
                e.preventDefault();
                const minInput = this.previousElementSibling.querySelector('#min-price-input');
                const maxInput = this.previousElementSibling.querySelector('#max-price-input');
                const min = parseInt(minInput.value) || 0;
                const max = parseInt(maxInput.value) || 100000;
                currentFilters.minPrice = min;
                currentFilters.maxPrice = max;
                applyFilters();
                updateActiveFilters();
            });
        });

        // Обработчики для кнопок открытия фильтров
        document.querySelectorAll('.filter-toggle').forEach(button => {
            button.addEventListener('click', function() {
                const filtersContainer = this.nextElementSibling;
                if (filtersContainer.style.display === 'none' || filtersContainer.style.display === '') {
                    filtersContainer.style.display = 'block';
                } else {
                    filtersContainer.style.display = 'none';
                }
            });
        });
    }

    // Показать уведомление
    function showNotification(message) {
        notificationText.textContent = message;
        notification.classList.add('active');
        
        setTimeout(() => {
            notification.classList.remove('active');
        }, 3000);
    }

    // Открытие мобильного меню
    function openMobileMenu() {
        mobileMenu.classList.add('active');
        menuOverlay.classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    // Закрытие мобильного меню
    function closeMobileMenu() {
        mobileMenu.classList.remove('active');
        menuOverlay.classList.remove('active');
        document.body.style.overflow = '';
    }

    // ОПТИМИЗИРОВАННАЯ навигация по страницам с улучшенной анимацией
    function navigateToPage(page, category = null) {
        // Сохраняем текущую позицию скролла перед переходом
        if (lastPage) {
            scrollPositions[lastPage] = window.scrollY;
        }
        
        // Добавляем в историю навигации
        navigationHistory.push({page, category});
        lastPage = page;

        // Скрыть все страницы
        pageSections.forEach(section => {
            section.classList.remove('active');
        });
        
        // Показать выбранную страницу с анимацией
        const targetSection = document.getElementById(page);
        targetSection.classList.add('active');
        
        if (page === 'product-detail') {
            targetSection.style.animation = 'fadeInSlideUp 1s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards';
        } else {
            targetSection.style.animation = 'fadeIn 0.8s ease forwards';
        }
        
        // Прокрутка к топу с smooth behavior
        const categoryPages = ['all', 'suits', 'jackets', 'pants', 'shirts', 'accessories', 'new-collection', 'search-results', 'product-detail'];
        const importantPages = ['home', 'wishlist', 'cart'];
        if (categoryPages.includes(page) || importantPages.includes(page)) {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        } else if (scrollPositions[page]) {
            window.scrollTo({ top: scrollPositions[page], behavior: 'smooth' });
        } else {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // Обновляем активное состояние в навигационной панели категорий
        if (document.querySelector('.category-nav')) {
            document.querySelectorAll('.category-link').forEach(link => {
                link.classList.remove('active');
            });
            
            const currentLink = document.querySelector(`.category-link[data-page="${page}"]`);
            if (currentLink) {
                currentLink.classList.add('active');
            }
        }
        
        // Загрузка контента страницы
        if (page !== 'home' && page !== 'cart' && page !== 'wishlist' && 
            page !== 'product-detail' && page !== 'search-results') {
            populateCategory(page);
            applyFilters();  // Применяем фильтры после популяции
        }
        
        if (page === 'all') {
            // Активируем категорию при переходе
            if (category) {
                setTimeout(() => {
                    activateCategory(category);
                }, 10);
            } else {
                // По умолчанию активируем "all"
                activateCategory('all');
            }
        }

        // Обновляем иконки избранного после навигации
        setTimeout(updateAllFavoriteIcons, 0);
    }

    // ОПТИМИЗИРОВАННАЯ функция возврата назад с анимацией сверху вниз
    function goBack(e) {
        if (e) e.preventDefault();
        
        // Сохраняем текущую позицию скролла
        if (lastPage) {
            scrollPositions[lastPage] = window.scrollY;
        }
        
        if (navigationHistory.length > 1) {
            // Удаляем текущую страницу из истории
            navigationHistory.pop();
            
            // Получаем предыдущую страницу
            const prev = navigationHistory[navigationHistory.length - 1];
            lastPage = prev.page;
            
            // Скрыть все страницы
            pageSections.forEach(section => {
                section.classList.remove('active');
            });
            
            // Показать предыдущую страницу с анимацией сверху вниз
            const targetSection = document.getElementById(prev.page);
            targetSection.classList.add('active');
            targetSection.style.animation = 'fadeInSlideDown 1s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards';
            
            // Прокрутка к сохраненной позиции с smooth
            if (scrollPositions[prev.page]) {
                window.scrollTo({ top: scrollPositions[prev.page], behavior: 'smooth' });
            } else {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        
            // Обновляем активное состояние в навигационной панели категорий
            if (document.querySelector('.category-nav')) {
                document.querySelectorAll('.category-link').forEach(link => {
                    link.classList.remove('active');
                });
                
                const currentLink = document.querySelector(`.category-link[data-page="${prev.page}"]`);
                if (currentLink) {
                    currentLink.classList.add('active');
                }
            }
            
            // Если предыдущая страница категория, популируем и применяем фильтры
            if (['suits', 'jackets', 'pants', 'shirts', 'accessories', 'new-collection'].includes(prev.page)) {
                populateCategory(prev.page);
                applyFilters();
            } else if (prev.page === 'all' && prev.category) {
                activateCategory(prev.category);
            }

            // Обновляем иконки избранного
            setTimeout(updateAllFavoriteIcons, 0);
        } else {
            // Переход на главную
            navigateToPage('home');
        }
    }

    // Активация подкатегории в "Весь ассортимент"
    function activateCategory(category) {
        // Обновляем активную ссылку
        document.querySelectorAll('#all .category-link').forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('data-category') === category) {
                link.classList.add('active');
            }
        });

        // Обновляем заголовок и описание
        const header = document.querySelector('#all .section-header h2');
        const desc = document.querySelector('#all .section-header p');
        header.textContent = categoryDescriptions[category].title;
        desc.textContent = categoryDescriptions[category].description;

        // Скрываем все секции категорий
        document.querySelectorAll('#all .category-section').forEach(section => {
            section.classList.remove('active');
        });

        // Показываем выбранную секцию
        const targetSection = document.querySelector(`#all .category-section[data-category="${category}"]`);
        targetSection.classList.add('active');

        // Если категория "all", популируем все товары
        if (category === 'all') {
            populateAllProducts();
        } else {
            // Для других категорий популируем товары категории
            populateCategory(category);
        }

        // Применяем фильтры
        applyFilters();

        // Обновляем иконки избранного
        setTimeout(updateAllFavoriteIcons, 0);
    }

    // Заполнение всех товаров
    function populateAllProducts() {
        const container = document.querySelector(`#all .category-section[data-category="all"] .products-grid`);
        if (container) {
            container.innerHTML = '';
            
            Object.values(products).forEach(product => {
                const productCard = createProductCard(product);
                container.appendChild(productCard);
                
                // Добавление обработчиков для карточки
                productCard.addEventListener('click', function(e) {
                    if (window.getSelection().toString().length > 0) {
                        return;
                    }
                    if (e.target.closest('.action-btn') || e.target.closest('.add-to-cart')) {
                        return;
                    }
                    showProductDetail(product.id);
                });
                
                productCard.querySelector('.add-to-cart').addEventListener('click', function(e) {
                    e.stopPropagation();
                    openQuickAddModal(product.id);
                });
                
                productCard.querySelector('.action-btn[data-id]').addEventListener('click', function(e) {
                    e.stopPropagation();
                    toggleWishlist(product.id, this);
                });
            });
        }
    }

    // Заполнение категории товарами
    function populateCategory(category) {
        // Для страницы категории
        const categoryContainer = document.querySelector(`#${category} .products-grid`);
        if (categoryContainer) {
            categoryContainer.innerHTML = '';
            
            // Фильтрация товаров по категории
            const categoryProducts = Object.values(products).filter(
                product => product.category === category
            );
            
            // Добавление товаров в контейнер
            categoryProducts.forEach(product => {
                const productCard = createProductCard(product);
                categoryContainer.appendChild(productCard);
                
                // Добавление обработчиков для карточки
                productCard.addEventListener('click', function(e) {
                    if (window.getSelection().toString().length > 0) {
                        return;
                    }
                    if (e.target.closest('.action-btn') || e.target.closest('.add-to-cart')) {
                        return;
                    }
                    showProductDetail(product.id);
                });
                
                productCard.querySelector('.add-to-cart').addEventListener('click', function(e) {
                    e.stopPropagation();
                    openQuickAddModal(product.id);
                });
                
                productCard.querySelector('.action-btn[data-id]').addEventListener('click', function(e) {
                    e.stopPropagation();
                    toggleWishlist(product.id, this);
                });
            });
        }
        
        // Для страницы "Весь ассортимент"
        const allContainer = document.querySelector(`#all .category-section[data-category="${category}"] .products-grid`);
        if (allContainer) {
            allContainer.innerHTML = '';
            
            // Фильтрация товаров по категории
            const categoryProducts = Object.values(products).filter(
                product => product.category === category
            );
            
            // Добавление товаров в контейнер
            categoryProducts.forEach(product => {
                const productCard = createProductCard(product);
                allContainer.appendChild(productCard);
                
                // Добавление обработчиков для карточки
                productCard.addEventListener('click', function(e) {
                    if (window.getSelection().toString().length > 0) {
                        return;
                    }
                    if (e.target.closest('.action-btn') || e.target.closest('.add-to-cart')) {
                        return;
                    }
                    showProductDetail(product.id);
                });
                
                productCard.querySelector('.add-to-cart').addEventListener('click', function(e) {
                    e.stopPropagation();
                    openQuickAddModal(product.id);
                });
                
                productCard.querySelector('.action-btn[data-id]').addEventListener('click', function(e) {
                    e.stopPropagation();
                    toggleWishlist(product.id, this);
                });
            });
        }
    }

    // Создание карточки товара с бордовыми сердечками для избранного
    function createProductCard(product) {
        const isInWishlist = wishlist[product.id] ? true : false;
        const heartIconClass = isInWishlist ? 'fas' : 'far';
        const heartStyle = isInWishlist ? 'favorite' : '';
        
        const card = document.createElement('div');
        card.className = 'product-card';
        card.innerHTML = `
            <div class="product-image" data-id="${product.id}">
                <img src="${product.image}" alt="${product.name}">
                <div class="product-actions">
                    <div class="action-btn ${heartStyle}" data-id="${product.id}">
                        <i class="${heartIconClass} fa-heart"></i>
                    </div>
                </div>
            </div>
            <div class="product-info">
                <h3 class="product-title" data-id="${product.id}">${product.name}</h3>
                <div class="product-seasonality">Сезон: ${product.season.join(', ')}</div>
                <div class="product-material">Материал: ${product.material}</div>
                <div class="product-price">
                    <div class="price">${product.formattedPrice}</div>
                    <button class="add-to-cart" data-id="${product.id}">
                        <i class="fas fa-shopping-bag"></i>
                    </button>
                </div>
            </div>
        `;
        
        return card;
    }

    // Добавление в корзину с суммированием товаров одного размера
    function addToCart(productId, size = null, quantity = 1) {
        const product = products[productId];
        if (!product) return;
        
        // Если размер не указан, берем первый доступный
        const selectedSize = size || product.sizes[0];
        
        // Проверяем, есть ли такой товар с таким же размером в корзине
        const existingItemIndex = cart.findIndex(item => 
            item.id === productId && item.size === selectedSize
        );
        
        if (existingItemIndex !== -1) {
            // Увеличиваем количество существующего товара
            cart[existingItemIndex].quantity += quantity;
            showNotification(`Количество "${product.name}" (размер: ${selectedSize}) увеличено`);
        } else {
            // Добавляем новый товар с указанием размера
            cart.push({
                id: productId,
                name: product.name,
                price: product.price,
                formattedPrice: product.formattedPrice,
                image: product.image,
                size: selectedSize,
                quantity: quantity
            });
            showNotification(`Товар "${product.name}" (размер: ${selectedSize}) добавлен в корзину`);
        }
        
        updateCart();
        localStorage.setItem('cart', JSON.stringify(cart));
        
        // Анимация добавления
        const button = document.querySelector(`.add-to-cart[data-id="${productId}"]`);
        if (button) {
            button.classList.add('pulse');
            setTimeout(() => {
                button.classList.remove('pulse');
            }, 500);
        }
    }

    // Переключение избранного с бордовыми сердечками
    function toggleWishlist(productId, button) {
        const product = products[productId];
        if (!product) return;
        
        if (!wishlist[productId]) {
            // Добавляем в избранное
            wishlist[productId] = {
                id: product.id,
                name: product.name,
                price: product.price,
                formattedPrice: product.formattedPrice,
                image: product.image
            };
            
            // Обновляем иконку
            button.classList.add('favorite');
            button.querySelector('i').className = 'fas fa-heart';
            showNotification(`Товар "${product.name}" добавлен в избранное`);
        } else {
            // Удаляем из избранного
            delete wishlist[productId];
            
            // Обновляем иконку
            button.classList.remove('favorite');
            button.querySelector('i').className = 'far fa-heart';
            showNotification(`Товар "${product.name}" удален из избранного`);
        }
        
        updateWishlist();
        localStorage.setItem('wishlist', JSON.stringify(wishlist));
        
        // Обновляем все иконки избранного
        updateAllFavoriteIcons();
    }

    // Обновление корзины
    function updateCart() {
        const cartCount = cart.reduce((total, item) => total + item.quantity, 0);
        
        // Обновление счетчиков
        if (mobileCartCount) {
            mobileCartCount.textContent = cartCount;
            mobileCartCount.style.display = cartCount > 0 ? 'flex' : 'none';
        }
        
        // Обновление страницы корзины
        const cartItemsContainer = document.querySelector('#cart .cart-items');
        if (cartItemsContainer) {
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = `
                    <div class="empty-container">
                        <i class="fas fa-shopping-bag"></i>
                        <h3>Ваша корзина пуста</h3>
                        <p>Добавьте товары из каталога</p>
                        <a href="#" class="btn nav-link" data-page="all" style="margin-top: 20px;">Перейти в каталог</a>
                    </div>
                `;
                
                // Скрываем блок с итогами
                document.querySelector('.summary').style.display = 'none';

                // Привязываем обработчик к динамической ссылке
                const catalogLink = cartItemsContainer.querySelector('.nav-link');
                if (catalogLink) {
                    catalogLink.addEventListener('click', function(e) {
                        e.preventDefault();
                        const page = this.getAttribute('data-page');
                        navigateToPage(page);
                    });
                }
            } else {
                cartItemsContainer.innerHTML = '';
                
                cart.forEach((item, index) => {
                    const itemEl = document.createElement('div');
                    itemEl.className = 'cart-item';
                    itemEl.setAttribute('data-id', item.id);
                    itemEl.setAttribute('data-index', index);
                    itemEl.setAttribute('data-size', item.size);
                    itemEl.innerHTML = `
                        <div class="cart-item-image" data-id="${item.id}">
                            <img src="${item.image}" alt="${item.name}">
                        </div>
                        <div class="cart-item-details">
                            <h3 class="cart-item-title" data-id="${item.id}">${item.name}</h3>
                            <div class="cart-item-meta">
                                <span class="cart-item-size">Размер: ${item.size}</span>
                                <span class="cart-item-price">${item.formattedPrice}</span>
                            </div>
                            <div class="cart-item-actions">
                                <div class="quantity-control">
                                    <button class="quantity-btn minus" title="Уменьшить">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <input type="text" class="quantity-input" value="${item.quantity}" readonly>
                                    <button class="quantity-btn plus" title="Увеличить">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                                <button class="remove-btn action-btn" title="Удалить">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    `;
                    cartItemsContainer.appendChild(itemEl);
                    
                    // Добавление обработчиков для управления количеством
                    itemEl.querySelector('.minus').addEventListener('click', function() {
                        const index = itemEl.getAttribute('data-index');
                        updateCartItemQuantity(index, -1);
                    });
                    
                    itemEl.querySelector('.plus').addEventListener('click', function() {
                        const index = itemEl.getAttribute('data-index');
                        updateCartItemQuantity(index, 1);
                    });
                    
                    itemEl.querySelector('.remove-btn').addEventListener('click', function() {
                        const index = itemEl.getAttribute('data-index');
                        removeFromCart(index);
                    });
                    
                    // Открытие страницы товара из корзины
                    itemEl.querySelector('.cart-item-image').addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        showProductDetail(id);
                    });
                    
                    itemEl.querySelector('.cart-item-title').addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        showProductDetail(id);
                    });
                });
                
                // Показываем блок с итогами
                document.querySelector('.summary').style.display = 'block';
                
                // Обновляем итоговую сумму
                updateCartSummary();
            }
        }
    }

    // Обновление сводки корзины
    function updateCartSummary() {
        const itemsCount = cart.reduce((total, item) => total + item.quantity, 0);
        const subtotal = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
        const discount = Math.round(subtotal * 0.05); // 5% скидка
        const total = subtotal - discount;
        
        // Форматирование чисел
        const formatCurrency = (amount) => {
            return amount.toLocaleString('ru-RU') + ' ₽';
        };
        
        // Обновляем значения в сводке
        document.getElementById('cart-items-count').textContent = itemsCount;
        document.getElementById('cart-subtotal').textContent = formatCurrency(subtotal);
        document.getElementById('cart-discount').textContent = formatCurrency(discount);
        document.getElementById('cart-total').textContent = formatCurrency(total);
    }

    // Обновление количества количества в корзине
    function updateCartItemQuantity(index, change) {
        if (cart[index]) {
            cart[index].quantity += change;
            
            if (cart[index].quantity <= 0) {
                removeFromCart(index);
            } else {
                updateCart();
                localStorage.setItem('cart', JSON.stringify(cart));
            }
        }
    }

    // Удаление из корзины
    function removeFromCart(index) {
        if (cart[index]) {
            const item = cart[index];
            const itemElement = document.querySelector(`.cart-item[data-index="${index}"]`);
            
            if (itemElement) {
                // Добавляем анимацию "улетания"
                itemElement.classList.add('fly-out');
                
                // Удаляем элемент после завершения анимации
                setTimeout(() => {
                    cart.splice(index, 1);
                    updateCart();
                    localStorage.setItem('cart', JSON.stringify(cart));
                    showNotification(`Товар "${item.name}" удален из корзины`);
                }, 500);
            }
        }
    }

    // Обновление избранного
    function updateWishlist() {
        // Подсчет общего количества избранных товаров
        const wishlistCount = Object.keys(wishlist).length;
        
        // Обновление счетчиков
        if (mobileWishlistCount) {
            mobileWishlistCount.textContent = wishlistCount;
            mobileWishlistCount.style.display = wishlistCount > 0 ? 'flex' : 'none';
        }
        
        // Обновление страницы избранного
        const wishlistContainer = document.querySelector('#wishlist .wishlist-items');
        if (wishlistContainer) {
            if (wishlistCount === 0) {
                wishlistContainer.innerHTML = `
                    <div class="empty-container">
                        <i class="far fa-heart"></i>
                        <h3>Нет избранных товаров</h3>
                        <p>Добавьте товары в избранное</p>
                        <a href="#" class="btn nav-link" data-page="all" style="margin-top: 20px;">Перейти в каталог</a>
                    </div>
                `;

                // Привязываем обработчик к динамической ссылке
                const catalogLink = wishlistContainer.querySelector('.nav-link');
                if (catalogLink) {
                    catalogLink.addEventListener('click', function(e) {
                        e.preventDefault();
                        const page = this.getAttribute('data-page');
                        navigateToPage(page);
                    });
                }
            } else {
                wishlistContainer.innerHTML = '';
                
                Object.values(wishlist).forEach(item => {
                    const itemEl = document.createElement('div');
                    itemEl.className = 'wishlist-item';
                    itemEl.setAttribute('data-id', item.id);
                    itemEl.innerHTML = `
                        <div class="wishlist-item-image" data-id="${item.id}">
                            <img src="${item.image}" alt="${item.name}">
                        </div>
                        <div class="wishlist-item-details">
                            <h3 class="wishlist-item-title" data-id="${item.id}">${item.name}</h3>
                            <div class="wishlist-item-price">${item.formattedPrice}</div>
                            <div class="wishlist-item-actions">
                                <button class="btn quick-add" data-id="${item.id}">
                                    <i class="fas fa-shopping-bag"></i> В корзину
                                </button>
                                <button class="remove-btn" data-id="${item.id}">
                                    <i class="fas fa-trash"></i> Удалить
                                </button>
                            </div>
                        </div>
                    `;
                    wishlistContainer.appendChild(itemEl);
                    
                    // Добавление обработчиков
                    itemEl.querySelector('.quick-add').addEventListener('click', function() {
                        openQuickAddModal(item.id);
                    });
                    
                    itemEl.querySelector('.remove-btn').addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        removeFromWishlist(id);
                    });
                    
                    // Открытие страницы товара из избранного
                    itemEl.querySelector('.wishlist-item-image').addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        showProductDetail(id);
                    });
                    
                    itemEl.querySelector('.wishlist-item-title').addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        showProductDetail(id);
                    });
                });
            }
        }

        // Обновляем все иконки избранного
        updateAllFavoriteIcons();
    }

    // Удаление из избранного
    function removeFromWishlist(productId) {
        const item = wishlist[productId];
        const itemElement = document.querySelector(`.wishlist-item[data-id="${productId}"]`);
        
        if (itemElement) {
            // Добавляем анимацию "улетания"
            itemElement.classList.add('fly-out');
            
            // Удаляем элемент после завершения анимации
            setTimeout(() => {
                delete wishlist[productId];
                updateWishlist();
                localStorage.setItem('wishlist', JSON.stringify(wishlist));
                
                // Обновление иконки на странице товаров
                const heartIcon = document.querySelector(`.action-btn[data-id="${productId}"] i`);
                if (heartIcon) {
                    heartIcon.classList.remove('fas');
                    heartIcon.classList.add('far');
                }
                
                // Обновление кнопки на странице товара
                if (currentProductId == productId) {
                    const icon = addToWishlistDetailBtn.querySelector('i');
                    icon.className = 'far fa-heart';
                    addToWishlistDetailBtn.innerHTML = '<i class="far fa-heart"></i> В избранное';
                    addToWishlistDetailBtn.classList.add('btn-outline');
                }
                
                showNotification(`Товар "${item.name}" удален из избранного`);
            }, 500);
        }
    }

    // Открытие модального окна оформления заказа
    function openCheckoutModal() {
        if (cart.length === 0) {
            showNotification('Ваша корзина пуста!');
            return;
        }
        
        // Обновляем итоговую сумму в модальном окне
        const total = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
        const discount = Math.round(total * 0.05); // 5% скидка
        const finalTotal = total - discount;
        
        modalTotalEl.textContent = finalTotal.toLocaleString('ru-RU') + ' ₽';
        
        checkoutModal.classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    // Закрытие модального окна
    function closeCheckoutModal() {
        checkoutModal.classList.remove('active');
        document.body.style.overflow = '';
    }

    // Подтверждение заказа
    function confirmOrder() {
        const form = document.getElementById('checkout-form');
        
        if (!form.checkValidity()) {
            showNotification('Пожалуйста, заполните все обязательные поля!');
            form.reportValidity();
            return;
        }
        
        // Собираем данные формы
        const formData = {
            firstName: document.getElementById('first-name').value,
            lastName: document.getElementById('last-name').value,
            email: document.getElementById('email').value,
            phone: document.getElementById('phone').value,
            address: document.getElementById('address').value,
            city: document.getElementById('city').value,
            zip: document.getElementById('zip').value,
            comment: document.getElementById('comment').value,
            items: cart
        };
        
        // Здесь должна быть логика отправки данных на сервер
        console.log('Данные заказа:', formData);
        
        // Показываем сообщение об успехе
        closeCheckoutModal();
        
        // Расчет итоговой суммы
        const total = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
        const discount = Math.round(total * 0.05);
        const finalTotal = total - discount;
        
        showNotification(`Заказ успешно оформлен! Сумма заказа: ${finalTotal.toLocaleString('ru-RU')} ₽\nНаш менеджер свяжется с вами для подтверждения.`);
        
        // Очищаем корзину
        cart = [];
        updateCart();
        localStorage.setItem('cart', JSON.stringify(cart));
        
        // Очищаем форму
        form.reset();
    }

    // Показать страницу товара
    function showProductDetail(productId) {
        // Сохраняем позицию скролла текущей страницы
        if (lastPage) {
            scrollPositions[lastPage] = window.scrollY;
        }
        
        const product = products[productId];
        if (!product) return;
        
        currentProductId = productId;
        
        // Заполняем данные товара
        productDetailName.textContent = product.name;
        productDetailPrice.textContent = product.formattedPrice;
        
        // Добавленный материал
        productDetailMaterial.textContent = `Материал: ${product.material}`;
        
        // Добавленный силуэт
        productDetailSilhouette.textContent = `Силуэт: ${product.silhouette}`;
        
        // Добавленный цвет
        productDetailColor.textContent = `Цвет: ${product.color}`;
        
        // Заполняем описание
        productDetailDescription.textContent = product.description;
        
        // Заполняем преимущества
        const benefitsContainer = document.getElementById('product-detail-benefits');
        benefitsContainer.innerHTML = '';
        product.benefits.forEach(benefit => {
            const li = document.createElement('li');
            li.textContent = benefit;
            benefitsContainer.appendChild(li);
        });
        
        // Заполняем изображения
        const thumbnailsContainer = document.querySelector('.product-thumbnails');
        const mainImageContainer = document.querySelector('.product-main-image');
        
        thumbnailsContainer.innerHTML = '';
        mainImageContainer.innerHTML = '';
        
        // Создаем основное изображение
        const mainImage = document.createElement('img');
        mainImage.src = product.images[0];
        mainImage.alt = product.name;
        mainImageContainer.appendChild(mainImage);
        
        // Создаем миниатюры
        product.images.forEach((image, index) => {
            const thumbnail = document.createElement('div');
            thumbnail.className = 'product-thumbnail';
            if (index === 0) thumbnail.classList.add('active');
            
            const img = document.createElement('img');
            img.src = image;
            img.alt = `Миниатюра ${index + 1} для ${product.name}`;
            
            thumbnail.appendChild(img);
            thumbnailsContainer.appendChild(thumbnail);
            
            // Обработчик клика по миниатюре
            thumbnail.addEventListener('click', function() {
                // Убираем активный класс у всех миниатюр
                document.querySelectorAll('.product-thumbnail').forEach(t => {
                    t.classList.remove('active');
                });
                
                // Добавляем активный класс текущей миниатюре
                this.classList.add('active');
                
                // Обновляем основное изображение
                mainImage.src = image;
            });
        });
        
        // Заполняем размеры
        const sizeSelect = document.getElementById('size');
        sizeSelect.innerHTML = '';
        
        product.allSizes.forEach(size => {
            const option = document.createElement('option');
            option.value = size;
            option.textContent = size;
            
            // Помечаем недоступные размеры
            if (!product.sizes.includes(size)) {
                option.disabled = true;
                option.classList.add('size-disabled');
            }
            
            sizeSelect.appendChild(option);
        });
        
        // Выбираем первый доступный размер
        if (product.sizes.length > 0) {
            sizeSelect.value = product.sizes[0];
        }
        
        // Сбрасываем количество
        quantityDisplay.value = 1;
        
        // Обновляем состояние кнопки избранного
        if (wishlist[productId]) {
            const icon = addToWishlistDetailBtn.querySelector('i');
            icon.className = 'fas fa-heart';
            addToWishlistDetailBtn.innerHTML = '<i class="fas fa-heart"></i> В избранном';
            addToWishlistDetailBtn.classList.add('favorite');
        } else {
            const icon = addToWishlistDetailBtn.querySelector('i');
            icon.className = 'far fa-heart';
            addToWishlistDetailBtn.innerHTML = '<i class="far fa-heart"></i> В избранное';
            addToWishlistDetailBtn.classList.remove('favorite');
        }
        
        // Сворачиваем все секции по умолчанию
        document.querySelectorAll('.section-content').forEach(content => {
            content.classList.remove('active');
        });
        document.querySelectorAll('.toggle-btn i').forEach(icon => {
            icon.className = 'fas fa-plus';
        });
        
        // Переходим на страницу товара
        navigateToPage('product-detail');
    }

    // Добавление в корзину со страницы товара
    function addToCartFromDetail() {
        if (!currentProductId) return;
        
        const quantity = parseInt(quantityDisplay.value);
        const size = document.getElementById('size').value;
        
        addToCart(currentProductId, size, quantity);
        
        // Сбрасываем количество
        quantityDisplay.value = 1;
    }

    // Добавление в избранное со страницы товара
    function addToWishlistFromDetail() {
        if (!currentProductId) return;
        
        const product = products[currentProductId];
        const icon = addToWishlistDetailBtn.querySelector('i');
        
        if (!wishlist[currentProductId]) {
            // Добавляем в избранное
            wishlist[currentProductId] = {
                id: product.id,
                name: product.name,
                price: product.price,
                formattedPrice: product.formattedPrice,
                image: product.image
            };
            
            // Обновляем кнопку
            icon.className = 'fas fa-heart';
            addToWishlistDetailBtn.innerHTML = '<i class="fas fa-heart"></i> В избранном';
            addToWishlistDetailBtn.classList.add('favorite');
            
            // Обновляем иконки на карточках товаров
            document.querySelectorAll(`.action-btn[data-id="${currentProductId}"]`).forEach(btn => {
                btn.classList.add('favorite');
                btn.querySelector('i').className = 'fas fa-heart';
            });
            
            showNotification(`Товар "${product.name}" добавлен в избранное`);
        } else {
            // Удаляем из избранного
            delete wishlist[currentProductId];
            
            // Обновляем кнопку
            icon.className = 'far fa-heart';
            addToWishlistDetailBtn.innerHTML = '<i class="far fa-heart"></i> В избранное';
            addToWishlistDetailBtn.classList.remove('favorite');
            
            // Обновляем иконки на карточках товаров
            document.querySelectorAll(`.action-btn[data-id="${currentProductId}"]`).forEach(btn => {
                btn.classList.remove('favorite');
                btn.querySelector('i').className = 'far fa-heart';
            });
            
            showNotification(`Товар "${product.name}" удален из избранного`);
        }
        
        updateWishlist();
        localStorage.setItem('wishlist', JSON.stringify(wishlist));
    }

    // Увеличение количества на странице товара
    function increaseQuantity() {
        let value = parseInt(quantityDisplay.value);
        value++;
        quantityDisplay.value = value;
    }

    // Уменьшение количества на странице товара
    function decreaseQuantity() {
        let value = parseInt(quantityDisplay.value);
        if (value > 1) {
            value--;
            quantityDisplay.value = value;
        }
    }

    // Открытие модального окна быстрого добавления
    function openQuickAddModal(productId) {
        const product = products[productId];
        if (!product) return;
        
        quickAddProductId = productId;
        quickAddImg.src = product.image;
        quickAddTitle.textContent = product.name;
        quickAddPrice.textContent = product.formattedPrice;
        quickQuantity.value = 1;
        
        // Заполняем размеры
        quickSize.innerHTML = '';
        product.allSizes.forEach(size => {
            const option = document.createElement('option');
            option.value = size;
            option.textContent = size;
            
            // Помечаем недоступные размеры
            if (!product.sizes.includes(size)) {
                option.disabled = true;
                option.classList.add('size-disabled');
            }
            
            quickSize.appendChild(option);
        });
        
        // Выбираем первый доступный размер
        if (product.sizes.length > 0) {
            quickSize.value = product.sizes[0];
        }
        
        quickAddModal.classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    // Закрытие модального окна
    function closeQuickAddModal() {
        quickAddModal.classList.remove('active');
        document.body.style.overflow = '';
    }

    // Обновление количества в быстром добавлении
    function updateQuickQuantity(change) {
        let value = parseInt(quickQuantity.value) + change;
        if (value < 1) value = 1;
        quickQuantity.value = value;
    }

    // Добавление в корзину из быстрого добавления
    function addToCartFromQuick() {
        if (!quickAddProductId) return;
        
        const size = quickSize.value;
        const quantity = parseInt(quickQuantity.value);
        
        addToCart(quickAddProductId, size, quantity);
        closeQuickAddModal();
    }
        
    // Поиск товаров с переходом на отдельную страницу
    function performSearch(query) {
        if (!query.trim()) {
            showNotification('Введите поисковый запрос');
            return;
        }
        
        // Фильтрация товаров
        const searchResults = Object.values(products).filter(product => 
            product.name.toLowerCase().includes(query.toLowerCase())
        );
        
        // Переходим на страницу результатов поиска
        navigateToPage('search-results');
        
        // Обновляем заголовок
        document.getElementById('search-results-text').textContent = 
            `Найдено ${searchResults.length} товаров по запросу: "${query}"`;
        
        // Отображаем результаты
        const container = document.getElementById('search-results-container');
        container.innerHTML = '';
        
        if (searchResults.length === 0) {
            container.innerHTML = `
                <div class="empty-container">
                    <i class="fas fa-search"></i>
                    <h3>Товары не найдены</h3>
                    <p>Попробуйте изменить поисковый запрос</p>
                </div>
            `;
        } else {
            searchResults.forEach(product => {
                const productCard = createProductCard(product);
                container.appendChild(productCard);
                
                // Добавление обработчиков для карточки
                productCard.addEventListener('click', function(e) {
                    if (window.getSelection().toString().length > 0) {
                        return;
                    }
                    if (e.target.closest('.action-btn') || e.target.closest('.add-to-cart')) {
                        return;
                    }
                    showProductDetail(product.id);
                });
                
                productCard.querySelector('.add-to-cart').addEventListener('click', function(e) {
                    e.stopPropagation();
                    openQuickAddModal(product.id);
                });
                
                productCard.querySelector('.action-btn[data-id]').addEventListener('click', function(e) {
                    e.stopPropagation();
                    toggleWishlist(product.id, this);
                });
            });
        }
    }

    // Применение фильтров к товарам
    function applyFilters() {
        // Определяем текущую страницу
        const activeSection = document.querySelector('.page-section.active');
        const currentPage = activeSection.id;
        
        let targetGrid;
        let categoryFilter = currentPage;

        if (currentPage === 'all') {
            const activeCategorySection = activeSection.querySelector('.category-section.active');
            targetGrid = activeCategorySection.querySelector('.products-grid');
            categoryFilter = activeCategorySection.getAttribute('data-category');
        } else {
            targetGrid = activeSection.querySelector('.products-grid');
        }

        if (!targetGrid) return;

        // Фильтруем товары
        let filteredProducts = Object.values(products).filter(product => {
            // Фильтр по категории, если не 'all'
            if (categoryFilter !== 'all' && product.category !== categoryFilter) {
                return false;
            }

            // Фильтр по цене
            if (product.price < currentFilters.minPrice || product.price > currentFilters.maxPrice) {
                return false;
            }
            
            // Фильтр по сезону
            if (currentFilters.seasons.length > 0) {
                const hasMatchingSeason = currentFilters.seasons.some(season => 
                    product.season.includes(season)
                );
                if (!hasMatchingSeason) return false;
            }
            
            // Фильтр по цвету (множественный выбор)
            if (currentFilters.colors.length > 0 && 
                !currentFilters.colors.includes(product.color)) {
                return false;
            }
            
            // Фильтр по наличию
            if (currentFilters.inStock && !product.inStock) {
                return false;
            }
            
            return true;
        });
        
        // Отображаем отфильтрованные товары
        targetGrid.innerHTML = '';
            
        if (filteredProducts.length === 0) {
            targetGrid.innerHTML = `
                <div class="empty-container">
                    <i class="fas fa-search"></i>
                    <h3>Товары не найдены</h3>
                    <p>Попробуйте изменить настройки фильтра</p>
                </div>
            `;
        } else {
            filteredProducts.forEach(product => {
                const productCard = createProductCard(product);
                targetGrid.appendChild(productCard);
                
                // Добавление обработчиков для карточки
                productCard.addEventListener('click', function(e) {
                    if (window.getSelection().toString().length > 0) {
                        return;
                    }
                    if (e.target.closest('.action-btn') || e.target.closest('.add-to-cart')) {
                        return;
                    }
                    showProductDetail(product.id);
                });
                
                productCard.querySelector('.add-to-cart').addEventListener('click', function(e) {
                    e.stopPropagation();
                    openQuickAddModal(product.id);
                });
                
                productCard.querySelector('.action-btn[data-id]').addEventListener('click', function(e) {
                    e.stopPropagation();
                    toggleWishlist(product.id, this);
                });
            });
        }
    }

    // Сброс всех фильтров
    function resetFilters() {
        // Сброс значений фильтров
        currentFilters = {
            minPrice: 0,
            maxPrice: 100000,
            seasons: [],
            colors: [],
            inStock: false
        };
        
        // Сброс UI элементов
        document.querySelectorAll('.price-input').forEach(input => {
            input.value = '';
        });
        
        document.querySelectorAll('input[name="season"]').forEach(checkbox => {
            checkbox.checked = false;
        });
        
        document.querySelectorAll('.color-option').forEach(option => {
            option.classList.remove('active');
        });
        
        document.querySelectorAll('.in-stock').forEach(checkbox => {
            checkbox.checked = false;
        });
        
        // Обновление товаров
        applyFilters();
        updateActiveFilters();
    }

    // Обновление отображения активных фильтров
    function updateActiveFilters() {
        document.querySelectorAll('#active-filters').forEach(container => {
            container.innerHTML = '';
            
            // Цена
            if (currentFilters.minPrice > 0 || currentFilters.maxPrice < 100000) {
                const minPrice = currentFilters.minPrice;
                const maxPrice = currentFilters.maxPrice;
                const tag = document.createElement('div');
                tag.className = 'filter-tag';
                let priceText = '';
                if (minPrice > 0 && maxPrice < 100000) {
                    priceText = `${minPrice.toLocaleString('ru-RU')} ₽ - ${maxPrice.toLocaleString('ru-RU')} ₽`;
                } else if (minPrice > 0) {
                    priceText = `> ${minPrice.toLocaleString('ru-RU')} ₽`;
                } else if (maxPrice < 100000) {
                    priceText = `< ${maxPrice.toLocaleString('ru-RU')} ₽`;
                }
                tag.innerHTML = `
                    Цена: ${priceText}
                    <button class="remove-filter" data-type="price">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                container.appendChild(tag);
                
                tag.querySelector('.remove-filter').addEventListener('click', () => {
                    resetFilters();
                });
            }
            
            // Сезоны
            currentFilters.seasons.forEach(season => {
                const tag = document.createElement('div');
                tag.className = 'filter-tag';
                tag.innerHTML = `
                    ${season}
                    <button class="remove-filter" data-type="season" data-value="${season}">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                container.appendChild(tag);
                
                tag.querySelector('.remove-filter').addEventListener('click', function() {
                    const seasonToRemove = this.getAttribute('data-value');
                    currentFilters.seasons = currentFilters.seasons.filter(s => s !== seasonToRemove);
                    document.querySelectorAll(`input[name="season"][value="${seasonToRemove}"]`).forEach(checkbox => {
                        checkbox.checked = false;
                    });
                    applyFilters();
                    updateActiveFilters();
                });
            });
            
            // Цвета
            currentFilters.colors.forEach(color => {
                const tag = document.createElement('div');
                tag.className = 'filter-tag';
                tag.innerHTML = `
                    Цвет: ${color}
                    <button class="remove-filter" data-type="color" data-value="${color}">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                container.appendChild(tag);
                
                tag.querySelector('.remove-filter').addEventListener('click', function() {
                    const colorToRemove = this.getAttribute('data-value');
                    currentFilters.colors = currentFilters.colors.filter(c => c !== colorToRemove);
                    
                    // Снимаем выделение с цвета
                    document.querySelectorAll(`.color-option[data-color="${colorToRemove}"]`)
                        .forEach(option => option.classList.remove('active'));
                    
                    applyFilters();
                    updateActiveFilters();
                });
            });
            
            // Наличие
            if (currentFilters.inStock) {
                const tag = document.createElement('div');
                tag.className = 'filter-tag';
                tag.innerHTML = `
                    В наличии
                    <button class="remove-filter" data-type="inStock">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                container.appendChild(tag);
                
                tag.querySelector('.remove-filter').addEventListener('click', () => {
                    currentFilters.inStock = false;
                    document.querySelectorAll('.in-stock').forEach(checkbox => {
                        checkbox.checked = false;
                    });
                    applyFilters();
                    updateActiveFilters();
                });
            }
        });
    }

    // Форматирование валюты
    function formatCurrency(amount) {
        return amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
    }

    // Синхронизация полей цены
    function validatePriceInputs() {
        const minInput = document.getElementById('min-price-input');
        const maxInput = document.getElementById('max-price-input');
        let min = parseInt(minInput.value) || 0;
        let max = parseInt(maxInput.value) || 100000;

        if (min > max) {
            minInput.value = max;
            min = max;
        }

        return { min, max };
    }
</script>
</body>
</html>